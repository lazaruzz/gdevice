char render_terrain_glsl[] = {'V','E','R','T','E','X',':',13,10,'#','v','e','r','s','i','o','n',' ','4','0','0',13,10,'/','/',' ','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=',13,10,'/','/',' ',' ','_','_','_','_','_',' ',' ',' ',' ',' ',' ',' ',' ',' ','_',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','_','_','_','_','_',' ','_',' ',' ',' ',' ',' ',' ',' ',' ',' ','_',' ',' ',' ',' ',' ',' ',' ',' ',' ',13,10,'/','/',' ','|',' ',' ','|',' ',' ','|','_','_','_',' ','_','_','_','|',' ','|','_',' ','_','_','_',' ','_',' ','_',' ',' ',' ','|',' ',' ',' ','_','_','|',' ','|','_',' ','_','_','_',' ','_','|',' ','|','_','_','_',' ','_','_','_',' ',13,10,'/','/',' ','|',' ',' ','|',' ',' ','|',' ','-','_','|',' ',' ','_','|',' ',' ','_','|',' ','-','_','|','_',39,'_','|',' ',' ','|','_','_',' ',' ',' ','|',' ',' ',' ','|',' ','.',39,'|',' ','.',' ','|',' ','-','_','|',' ',' ','_','|',13,10,'/','/',' ',' ',92,'_','_','_','/','|','_','_','_','|','_','|',' ','|','_','|',' ','|','_','_','_','|','_',',','_','|',' ',' ','|','_','_','_','_','_','|','_','|','_','|','_','_',',','|','_','_','_','|','_','_','_','|','_','|',' ',' ',13,10,'/','/',13,10,'/','/',' ','G','i','v','e','n',' ','g','l','_','V','e','r','t','e','x','I','D',',',' ','t','u','r','n','s',' ','a',' ','h','e','i','g','h','t','-','q','u','a','r','t','e','t',' ','i','n','t','o',' ',13,10,'/','/',' ','a',' ','L','O','D',' ','b','l','e','n','d','e','d',' ','v','e','r','t','e','x',' ','p','o','s','i','t','i','o','n',' ','(','i','n',' ','m','o','d','e','l',' ','s','p','a','c','e',')','.',13,10,13,10,'u','n','i','f','o','r','m',' ','v','e','c','2',' ',' ','t','i','l','e','O','f','f','s','e','t',';',13,10,'u','n','i','f','o','r','m',' ','f','l','o','a','t',' ','k','e','r','n','e','l','S','i','z','e',';',13,10,'u','n','i','f','o','r','m',' ','s','a','m','p','l','e','r','2','D',' ','q','u','a','r','t','e','t','s','T','U',';',13,10,'i','n','t',' ','t','i','l','e','S','i','z','e',' ','=',' ','t','e','x','t','u','r','e','S','i','z','e','(','q','u','a','r','t','e','t','s','T','U',',',' ','0',')','.','x',';',13,10,13,10,'o','u','t',' ','v','e','c','3',' ','p','o','s','i','t','i','o','n',';',13,10,13,10,'v','o','i','d',' ','m','a','i','n','(',')',' ',13,10,'{',9,13,10,9,'/','/',' ','M','o','d','e','l','-','s','p','a','c','e',' ','v','e','r','t','e','x',' ','p','o','s','i','t','i','o','n',' ','i','n',' ','p','l','a','n','e',' ','X','Y',13,10,9,'v','e','c','2',' ','p',' ','=',' ','v','e','c','2','(',' ','g','l','_','V','e','r','t','e','x','I','D',' ','%',' ','t','i','l','e','S','i','z','e',',',' ','g','l','_','V','e','r','t','e','x','I','D',' ','/',' ','t','i','l','e','S','i','z','e',' ',')',';',9,9,13,10,9,13,10,9,'/','/',' ','G','e','t',' ','t','h','e',' ','q','u','a','r','t','e','t',13,10,9,'v','e','c','4',' ','q','u',9,'=',' ','t','e','x','t','u','r','e','L','o','d','(',' ','q','u','a','r','t','e','t','s','T','U',',',' ','(','p','.','x','y',' ','+',' ','0','.','5',')','/','t','i','l','e','S','i','z','e',',',' ','0',' ',')',';',13,10,13,10,9,'/','/',' ','C','o','m','p','u','t','e',' ','b','l','e','n','d',' ','f','a','c','t','o','r',' ','(','w','i','t','h',' ','L','O','D','+','1',',',' ','i','n',' ','[','k','e','r','n','e','l','S','i','z','e','-','2',',',' ','k','e','r','n','e','l','S','i','z','e','-','1',']',')',13,10,9,'f','l','o','a','t',' ','b','l','e','n','d',' ','=',' ','0','.','0',';',9,9,13,10,9,'v','e','c','2',' ','o','f','f','s','e','t',' ','=',' ','t','i','l','e','O','f','f','s','e','t',' ','+',' ','p','/','(','t','i','l','e','S','i','z','e','-','1',')',';',13,10,9,'f','l','o','a','t',' ','c','h','e','b','y','s','h','e','v',' ','=',' ','m','a','x','(','a','b','s','(','o','f','f','s','e','t','.','x',')',',',' ','a','b','s','(','o','f','f','s','e','t','.','y',')',')',';',13,10,9,'b','l','e','n','d',' ','=',' ','s','m','o','o','t','h','s','t','e','p','(','k','e','r','n','e','l','S','i','z','e','-','2',',',' ','k','e','r','n','e','l','S','i','z','e','-','1',',',' ','c','h','e','b','y','s','h','e','v',')',';',9,13,10,9,13,10,9,'/','/',' ','B','l','e','n','d',' ','p','o','s','i','t','i','o','n',' ','w','i','t','h',' ','c','o','a','r','s','e','r',' ','v','e','r','t','e','x',' ','p','o','s','i','t','i','o','n','.',13,10,9,'p',' ','=',' ','m','i','x','(','p',',',' ','p','-','m','o','d','(','p',',','2',')',',',' ','b','l','e','n','d',')',';',13,10,9,13,10,9,'/','/',' ','B','l','e','n','d',' ','h','e','i','g','h','t',' ','w','i','t','h',' ','c','o','a','r','s','e','r',' ','v','e','r','t','e','x',' ','h','e','i','g','h','t','.',13,10,9,'f','l','o','a','t',' ','h','e','i','g','h','t',' ','=',' ','m','i','x','(','m','i','x','(','q','u','.','x',',',' ','q','u','.','y',',',' ','b','l','e','n','d',')',',',' ','m','i','x','(','q','u','.','z',',',' ','q','u','.','w',',',' ','b','l','e','n','d',')',',',' ','b','l','e','n','d',')',';',13,10,9,13,10,9,'p','o','s','i','t','i','o','n',' ','=',' ','v','e','c','3','(','p','/','(','t','i','l','e','S','i','z','e','-','1',')',',',' ','h','e','i','g','h','t',')',';',13,10,'}',13,10,13,10,'C','O','N','T','R','O','L',':',13,10,'#','v','e','r','s','i','o','n',' ','4','0','0',' ',' ',13,10,'/','/',' ','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',13,10,'/','/',' ',' ',' ','_','_','_','_','_',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','_',' ','_',' ',' ',' ',' ',' ','_',' ',' ',' ','_',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','_','_','_','_','_',' ',' ',' ',' ',' ',' ',' ',' ',' ','_',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','_',' ',' ',' ',' ','_','_','_','_','_',' ','_',' ',' ',' ',' ',' ',' ',' ',' ',' ','_',' ',' ',' ',' ',' ',' ',' ',' ',' ',13,10,'/','/',' ',' ','|','_',' ',' ',' ','_','|','_','_','_',' ','_','_','_',' ','_','_','_',' ','_','_','_','|',' ','|',' ','|','_','_','_','|',' ','|','_','|','_','|','_','_','_',' ','_','_','_',' ',' ',' ','|',' ',' ',' ',' ',' ','|','_','_','_',' ','_','_','_','|',' ','|','_',' ','_','_','_',' ','_','_','_','|',' ','|',' ',' ','|',' ',' ',' ','_','_','|',' ','|','_',' ','_','_','_',' ','_','|',' ','|','_','_','_',' ','_','_','_',' ',13,10,'/','/',' ',' ',' ',' ','|',' ','|',' ','|',' ','-','_','|','_',' ','-','|','_',' ','-','|',' ','-','_','|',' ','|',' ','|',' ','.',39,'|',' ',' ','_','|',' ','|',' ','.',' ','|',' ',' ',' ','|',' ',' ','|',' ',' ',' ','-','-','|',' ','.',' ','|',' ',' ',' ','|',' ',' ','_','|',' ',' ','_','|',' ','.',' ','|',' ','|',' ',' ','|','_','_',' ',' ',' ','|',' ',' ',' ','|',' ','.',39,'|',' ','.',' ','|',' ','-','_','|',' ',' ','_','|',13,10,'/','/',' ',' ',' ',' ','|','_','|',' ','|','_','_','_','|','_','_','_','|','_','_','_','|','_','_','_','|','_','|','_','|','_','_',',','|','_','|',' ','|','_','|','_','_','_','|','_','|','_','|',' ',' ','|','_','_','_','_','_','|','_','_','_','|','_','|','_','|','_','|',' ','|','_','|',' ','|','_','_','_','|','_','|',' ',' ','|','_','_','_','_','_','|','_','|','_','|','_','_',',','|','_','_','_','|','_','_','_','|','_','|',' ',' ',13,10,'/','/',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',13,10,'/','/',' ','*',' ','P','a','t','c','h',' ','f','r','u','s','t','u','m',' ','c','u','l','l','i','n','g',' ',13,10,'/','/',' ','*',' ','T','e','s','s','e','l','l','a','t','i','o','n',' ','c','o','n','t','r','o','l',' ','o','f',' ','e','d','g','e','s',' ','a','n','d',' ','b','i','g',' ','p','a','t','c','h','e','s',' ','(','i','n','c','l','u','d','i','n','g',' ','v','e','r','t','i','c','a','l',')',' ',13,10,'/','/',' ','*',' ','D','i','s','p','l','a','c','e',' ','m','a','p','p','i','n','g',13,10,13,10,'u','n','i','f','o','r','m',' ','v','e','c','2',' ',' ','t','i','l','e','O','f','f','s','e','t',';',13,10,'u','n','i','f','o','r','m',' ','f','l','o','a','t',' ','k','e','r','n','e','l','S','i','z','e',';',13,10,'u','n','i','f','o','r','m',' ','i','n','t',' ',' ',' ','T','e','s','s','e','l','l','a','t','o','r',' ','=',' ','1',';',13,10,'u','n','i','f','o','r','m',' ','f','l','o','a','t',' ','t','e','s','s','e','l','l','a','t','i','o','n',' ','=',' ','0','.','1','5',';',13,10,'u','n','i','f','o','r','m',' ','m','a','t','4',' ',' ','M','o','d','e','l','V','i','e','w','P','r','o','j','e','c','t','i','o','n','M','a','t','r','i','x',';',13,10,'u','n','i','f','o','r','m',' ','f','l','o','a','t',' ','d','i','s','p','l','a','c','e','m','e','n','t','_','r','a','n','g','e',' ','=',' ','1','.','0',';',13,10,'u','n','i','f','o','r','m',' ','f','l','o','a','t',' ','s','c','a','l','e',';',13,10,'u','n','i','f','o','r','m',' ','f','l','o','a','t',' ','l','o','d','_','f','a','c','t','o','r',' ','=',' ','1','0','0','.','0',';',' ',' ',' ','/','/',' ','T','E','M','P',13,10,'u','n','i','f','o','r','m',' ','v','e','c','2',' ',' ','v','i','e','w','p','o','r','t',';',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','/','/',' ','T','E','M','P',13,10,13,10,'i','n',' ','v','e','c','3',' ','p','o','s','i','t','i','o','n','[',']',';',13,10,13,10,'o','u','t',' ','v','e','c','3',' ','t','P','o','s','i','t','i','o','n','[',']',';',13,10,'l','a','y','o','u','t','(','v','e','r','t','i','c','e','s',' ','=',' ','4',')',' ','o','u','t',';',13,10,13,10,'v','e','c','4',' ','p','r','o','j','e','c','t','T','o','N','D','S','(','v','e','c','3',' ','p','o','s','i','t','i','o','n',')',' ','{',13,10,' ',' ',' ','v','e','c','4',' ','r','e','s','u','l','t',' ','=',' ','M','o','d','e','l','V','i','e','w','P','r','o','j','e','c','t','i','o','n','M','a','t','r','i','x',' ','*',' ','v','e','c','4','(','p','o','s','i','t','i','o','n',',',' ','1','.','0',')',';',13,10,' ',' ',' ','r','e','s','u','l','t',' ','/','=',' ','r','e','s','u','l','t','.','w',';',' ','/','/',' ','S','c','a','l','e',' ','t','o',' ','[','-','1',',','+','1',']',13,10,' ',' ',' ','r','e','t','u','r','n',' ','r','e','s','u','l','t',';',13,10,'}',13,10,13,10,'b','o','o','l',' ','i','s','O','f','f','S','c','r','e','e','n','(','v','e','c','4',' ','n','d','s','P','o','s','i','t','i','o','n',')',' ','{',13,10,' ',' ',' ',' ','/','/','r','e','t','u','r','n',' ','(','n','d','s','P','o','s','i','t','i','o','n','.','z',' ','<',' ','-','0','.','5',')',' ','|','|',' ','a','n','y','(','l','e','s','s','T','h','a','n','(','n','d','s','P','o','s','i','t','i','o','n','.','x','y',',',' ','v','e','c','2','(','-','1','.','0',')',')',' ','|','|',' ','g','r','e','a','t','e','r','T','h','a','n','(','n','d','s','P','o','s','i','t','i','o','n','.','x','y',',',' ','v','e','c','2','(','1','.','0',')',')',')',';',13,10,' ',' ',' ',' ','r','e','t','u','r','n',' ','(','n','d','s','P','o','s','i','t','i','o','n','.','z',' ','<',' ','-','1','.','0',')',' ','|','|',' ','a','n','y','(','l','e','s','s','T','h','a','n','(','n','d','s','P','o','s','i','t','i','o','n','.','x','y',',',' ','v','e','c','2','(','-','2','.','0',')',')',' ','|','|',' ','g','r','e','a','t','e','r','T','h','a','n','(','n','d','s','P','o','s','i','t','i','o','n','.','x','y',',',' ','v','e','c','2','(','2','.','0',')',')',')',';',13,10,'}',13,10,' ',' ',' ',' ',13,10,'v','e','c','2',' ','p','r','o','j','e','c','t','T','o','S','c','r','e','e','n','(','v','e','c','4',' ','n','d','s','P','o','s','i','t','i','o','n',')',' ','{',13,10,9,'r','e','t','u','r','n',' ','(','c','l','a','m','p','(','n','d','s','P','o','s','i','t','i','o','n','.','x','y',',',' ','-','1','.','3',',',' ','1','.','3',')',' ','+',' ','1','.','0',')',' ','*',' ','(','v','i','e','w','p','o','r','t','.','x','y','*','0','.','5',')',';',13,10,'}',13,10,13,10,'f','l','o','a','t',' ','c','o','m','p','u','t','e','T','e','s','s','e','l','l','a','t','i','o','n','L','e','v','e','l','(','v','e','c','2',' ','s','s','0',',',' ','v','e','c','2',' ','s','s','1',')',' ','{',13,10,9,'r','e','t','u','r','n',' ','c','l','a','m','p','(','d','i','s','t','a','n','c','e','(','s','s','0',',',' ','s','s','1',')','/','l','o','d','_','f','a','c','t','o','r',',',' ','0',',',' ','1',')',';',13,10,'}',13,10,13,10,'v','o','i','d',' ','m','a','i','n','(',')',13,10,'{',13,10,9,'i','f','(',' ','g','l','_','I','n','v','o','c','a','t','i','o','n','I','D',' ','=','=',' ','0',' ',')',' ','{',13,10,9,9,'v','e','c','4',' ','p','0',' ','=',' ','p','r','o','j','e','c','t','T','o','N','D','S','(','p','o','s','i','t','i','o','n','[','0',']',')',';',13,10,9,9,'v','e','c','4',' ','p','1',' ','=',' ','p','r','o','j','e','c','t','T','o','N','D','S','(','p','o','s','i','t','i','o','n','[','1',']',')',';',13,10,9,9,'v','e','c','4',' ','p','2',' ','=',' ','p','r','o','j','e','c','t','T','o','N','D','S','(','p','o','s','i','t','i','o','n','[','2',']',')',';',13,10,9,9,'v','e','c','4',' ','p','3',' ','=',' ','p','r','o','j','e','c','t','T','o','N','D','S','(','p','o','s','i','t','i','o','n','[','3',']',')',';',13,10,9,13,10,' ',' ',' ',' ',' ',' ',' ',' ','i','f','(','a','l','l','(','b','v','e','c','4','(','i','s','O','f','f','S','c','r','e','e','n','(','p','0',')',',',' ','i','s','O','f','f','S','c','r','e','e','n','(','p','1',')',',',' ','i','s','O','f','f','S','c','r','e','e','n','(','p','2',')',',',' ','i','s','O','f','f','S','c','r','e','e','n','(','p','3',')',')',')',')',' ','{',13,10,' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','/','/',' ','D','i','s','c','a','r','d',' ','p','a','t','c','h',' ','(','l','a','t','e',' ','f','r','u','s','t','u','m',' ','c','u','l','l','i','n','g',')','.',13,10,' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','g','l','_','T','e','s','s','L','e','v','e','l','O','u','t','e','r','[','0',']',' ','=',' ','0',';',13,10,' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','g','l','_','T','e','s','s','L','e','v','e','l','O','u','t','e','r','[','1',']',' ','=',' ','0',';',13,10,' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','g','l','_','T','e','s','s','L','e','v','e','l','O','u','t','e','r','[','2',']',' ','=',' ','0',';',13,10,' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','g','l','_','T','e','s','s','L','e','v','e','l','O','u','t','e','r','[','3',']',' ','=',' ','0',';',13,10,' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','g','l','_','T','e','s','s','L','e','v','e','l','I','n','n','e','r','[','0',']',' ','=',' ','0',';',13,10,' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','g','l','_','T','e','s','s','L','e','v','e','l','I','n','n','e','r','[','1',']',' ','=',' ','0',';',13,10,' ',' ',' ',' ',' ',' ',' ',' ','}',' ','e','l','s','e',' ','{',13,10,' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','/','/',' ','T','O','D','O',':',' ','F','e','t','c','h',' ','(','a','n','d',' ','l','o','d',' ','b','l','e','n','d',')',' ','g','r','a','d','i','e','n','t',',',' ','s','u','b','m','a','p',',',' ','m','i','x','m','a','p',13,10,' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','/','/',' ','T','O','D','O',':',' ','T','e','s','s','e','l','l','a','t','i','o','n',' ','c','o','n','t','r','o','l',' ','f','o','r',' ','p','l','a','n','e',' ','c','h','a','n','g','e',',',' ','t','e','s','s','e','l','l','a','t','i','o','n',' ','o','f',' ','e','d','g','e','s',' ','a','n','d',' ','b','i','g',' ','p','a','t','c','h',' ','(','a','l','s','o',' ','v','e','r','t','i','c','a','l',')','.',13,10,' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',13,10,' ',' ',' ',' ',' ',' ',' ',' ','/','/','/','/',' ','T','E','M','P',13,10,9,9,9,'v','e','c','2',' ','s','s','0',' ','=',' ','p','r','o','j','e','c','t','T','o','S','c','r','e','e','n','(','p','0',')',';',13,10,9,9,9,'v','e','c','2',' ','s','s','1',' ','=',' ','p','r','o','j','e','c','t','T','o','S','c','r','e','e','n','(','p','1',')',';',13,10,9,9,9,'v','e','c','2',' ','s','s','2',' ','=',' ','p','r','o','j','e','c','t','T','o','S','c','r','e','e','n','(','p','2',')',';',13,10,9,9,9,'v','e','c','2',' ','s','s','3',' ','=',' ','p','r','o','j','e','c','t','T','o','S','c','r','e','e','n','(','p','3',')',';',13,10,13,10,9,9,9,'f','l','o','a','t',' ','e','0',' ','=',' ','c','o','m','p','u','t','e','T','e','s','s','e','l','l','a','t','i','o','n','L','e','v','e','l','(','s','s','1',',',' ','s','s','2',')',';',13,10,9,9,9,'f','l','o','a','t',' ','e','1',' ','=',' ','c','o','m','p','u','t','e','T','e','s','s','e','l','l','a','t','i','o','n','L','e','v','e','l','(','s','s','0',',',' ','s','s','1',')',';',13,10,9,9,9,'f','l','o','a','t',' ','e','2',' ','=',' ','c','o','m','p','u','t','e','T','e','s','s','e','l','l','a','t','i','o','n','L','e','v','e','l','(','s','s','3',',',' ','s','s','0',')',';',13,10,9,9,9,'f','l','o','a','t',' ','e','3',' ','=',' ','c','o','m','p','u','t','e','T','e','s','s','e','l','l','a','t','i','o','n','L','e','v','e','l','(','s','s','2',',',' ','s','s','3',')',';',13,10,' ',' ',' ',' ',' ',' ',' ',' ','/','/','/','/',13,10,9,9,9,'v','e','c','4',' ','o','x',' ','=',' ','t','i','l','e','O','f','f','s','e','t','.','x',' ','+',' ','v','e','c','4','(',' ','p','o','s','i','t','i','o','n','[','0',']','.','x',',',' ','p','o','s','i','t','i','o','n','[','1',']','.','x',',',' ','p','o','s','i','t','i','o','n','[','2',']','.','x',',',' ','p','o','s','i','t','i','o','n','[','3',']','.','x',' ',')',';',13,10,9,9,9,'v','e','c','4',' ','o','y',' ','=',' ','t','i','l','e','O','f','f','s','e','t','.','y',' ','+',' ','v','e','c','4','(',' ','p','o','s','i','t','i','o','n','[','0',']','.','y',',',' ','p','o','s','i','t','i','o','n','[','1',']','.','y',',',' ','p','o','s','i','t','i','o','n','[','2',']','.','y',',',' ','p','o','s','i','t','i','o','n','[','3',']','.','y',' ',')',';',13,10,9,9,9,'v','e','c','4',' ','d',' ','=',' ','s','q','r','t','(',' ','o','x','*','o','x',' ','+',' ','o','y','*','o','y',' ',')',';',' ',13,10,9,9,9,9,9,'/','/','m','a','x','(','a','b','s','(','o','x',')',',',' ','a','b','s','(','o','y',')',')',';',9,9,9,9,13,10,9,9,9,'d',' ','=',' ','1','.','0',' ','-',' ','s','m','o','o','t','h','s','t','e','p','(','0','.','0',',',' ','d','i','s','p','l','a','c','e','m','e','n','t','_','r','a','n','g','e','*','(','k','e','r','n','e','l','S','i','z','e','-','1',')',',',' ','d',')',';',13,10,9,9,9,9,'/','/',' ','c','l','a','m','p','(',' ','(','1','-','d','/','(','k','e','r','n','e','l','S','i','z','e','-','1','.','0',')',')','/','(','1','+','d',')',',',' ','0',',',' ','1',')',';',' ',13,10,9,9,9,'v','e','c','4',' ','t',' ','=',' ','1','.','0',' ','+',' ','T','e','s','s','e','l','l','a','t','o','r',' ','*',' ','6','3','.','0',' ','*',' ','t','e','s','s','e','l','l','a','t','i','o','n',' ','*',' ','f','l','o','a','t','(','s','c','a','l','e',' ','=','=',' ','1','.','0',')',' ','*',' ','d',' ',';','/','/','*',' ','(','e','0','+','e','1','+','e','2','+','e','3',')','/','4',';',' ','/','/',' ','T','E','M','P',13,10,9,9,9,'t',' ','=',' ','m','i','x','(','t','.','y','x','w','z',',',' ','t','.','z','y','x','w',',',' ','0','.','5',')',';',' ',13,10,9,9,13,10,' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','g','l','_','T','e','s','s','L','e','v','e','l','O','u','t','e','r','[','0',']',' ','=',' ','t','.','x',';',13,10,' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','g','l','_','T','e','s','s','L','e','v','e','l','O','u','t','e','r','[','1',']',' ','=',' ','t','.','y',';',13,10,' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','g','l','_','T','e','s','s','L','e','v','e','l','O','u','t','e','r','[','2',']',' ','=',' ','t','.','z',';',13,10,' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','g','l','_','T','e','s','s','L','e','v','e','l','O','u','t','e','r','[','3',']',' ','=',' ','t','.','w',';',13,10,' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','g','l','_','T','e','s','s','L','e','v','e','l','I','n','n','e','r','[','0',']',' ','=',' ','m','i','x','(','t','.','y',',',' ','t','.','z',',',' ','0','.','5',')',';',13,10,' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','g','l','_','T','e','s','s','L','e','v','e','l','I','n','n','e','r','[','1',']',' ','=',' ','m','i','x','(','t','.','x',',',' ','t','.','w',',',' ','0','.','5',')',';',13,10,' ',' ',' ',' ',' ',' ',' ',' ','}',13,10,' ',' ',' ',' ','}',13,10,13,10,9,'t','P','o','s','i','t','i','o','n','[','g','l','_','I','n','v','o','c','a','t','i','o','n','I','D',']',' ','=',' ','p','o','s','i','t','i','o','n','[','g','l','_','I','n','v','o','c','a','t','i','o','n','I','D',']',';',13,10,'}',13,10,13,10,'E','V','A','L','U','A','T','I','O','N',':',13,10,'#','v','e','r','s','i','o','n',' ','4','0','0',' ',' ',' ',' ',' ',' ',' ',' ',13,10,'/','/',' ','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',13,10,'/','/',' ',' ',' ','_','_','_','_','_',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','_',' ','_',' ',' ',' ',' ',' ','_',' ',' ',' ','_',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','_','_','_','_','_',' ',' ',' ',' ',' ',' ',' ',' ',' ','_',' ',' ',' ',' ',' ',' ',' ',' ',' ','_',' ',' ',' ','_',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','_','_','_','_','_',' ','_',' ',' ',' ',' ',' ',' ',' ',' ',' ','_',' ',' ',' ',' ',' ',' ',' ',' ',' ',13,10,'/','/',' ',' ','|','_',' ',' ',' ','_','|','_','_','_',' ','_','_','_',' ','_','_','_',' ','_','_','_','|',' ','|',' ','|','_','_','_','|',' ','|','_','|','_','|','_','_','_',' ','_','_','_',' ',' ',' ','|',' ',' ',' ','_','_','|','_',' ','_',' ','_','_','_','|',' ','|','_',' ','_',' ','_','_','_','|',' ','|','_','|','_','|','_','_','_',' ','_','_','_',' ',' ',' ','|',' ',' ',' ','_','_','|',' ','|','_',' ','_','_','_',' ','_','|',' ','|','_','_','_',' ','_','_','_',' ',13,10,'/','/',' ',' ',' ',' ','|',' ','|',' ','|',' ','-','_','|','_',' ','-','|','_',' ','-','|',' ','-','_','|',' ','|',' ','|',' ','.',39,'|',' ',' ','_','|',' ','|',' ','.',' ','|',' ',' ',' ','|',' ',' ','|',' ',' ',' ','_','_','|',' ','|',' ','|',' ','.',39,'|',' ','|',' ','|',' ','|',' ','.',39,'|',' ',' ','_','|',' ','|',' ','.',' ','|',' ',' ',' ','|',' ',' ','|','_','_',' ',' ',' ','|',' ',' ',' ','|',' ','.',39,'|',' ','.',' ','|',' ','-','_','|',' ',' ','_','|',13,10,'/','/',' ',' ',' ',' ','|','_','|',' ','|','_','_','_','|','_','_','_','|','_','_','_','|','_','_','_','|','_','|','_','|','_','_',',','|','_','|',' ','|','_','|','_','_','_','|','_','|','_','|',' ',' ','|','_','_','_','_','_','|',92,'_','/','|','_','_',',','|','_','|','_','_','_','|','_','_',',','|','_','|',' ','|','_','|','_','_','_','|','_','|','_','|',' ',' ','|','_','_','_','_','_','|','_','|','_','|','_','_',',','|','_','_','_','|','_','_','_','|','_','|',' ',' ',13,10,'/','/',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',13,10,'/','/',' ','C','o','m','p','u','t','e','s',' ','p','o','s','i','t','i','o','n',',',' ','g','r','a','d','i','e','n','t',',',' ','c','o','l','o','r',',',' ','m','i','x','m','a','p',' ','(','o','f',' ','t','h','e',' ','n','e','w',' ','v','e','r','t','e','x',')',13,10,'/','/',' ','i','n','t','e','r','p','o','l','a','t','i','n','g',' ','w','i','t','h','i','n',' ','t','h','e',' ','g','e','n','e','r','a','t','e','d',' ','p','a','t','c','h',' ','(','g','l','_','T','e','s','s','C','o','o','r','d','.','x','y',')','.',13,10,'/','/',' ','(','p','o','s','i','t','i','o','n',' ','i','s',' ','s','t','i','l','l',' ','i','n',' ','m','o','d','e','l',' ','s','p','a','c','e',')','.',13,10,'/','/',' ','N','O','T','E',':',' ','T','h','e',' ','h','e','i','g','h','t',' ','i','s',' ','d','i','s','p','l','a','c','e','d',' ','b','u','t',' ','i','t',' ','t','a','k','e','s',' ','l','o','t','s',' ','o','f',' ','f','e','t','c','h','e','s','.',13,10,13,10,'/','/',' ','U','N','I','F','O','R','M','S',':',13,10,'u','n','i','f','o','r','m',' ','s','a','m','p','l','e','r','2','D',' ','g','r','a','d','i','e','n','t','s','T','U',';',13,10,'u','n','i','f','o','r','m',' ','s','a','m','p','l','e','r','2','D',' ','c','o','l','o','r','s','T','U',';',13,10,'u','n','i','f','o','r','m',' ','s','a','m','p','l','e','r','2','D',' ','m','i','x','m','a','p','s','T','U',';',13,10,'u','n','i','f','o','r','m',' ','f','l','o','a','t',' ','s','c','a','l','e',';',13,10,'i','n','t',' ','t','i','l','e','S','i','z','e',' ','=',' ','t','e','x','t','u','r','e','S','i','z','e','(','m','i','x','m','a','p','s','T','U',',',' ','0',')','.','x',';',13,10,13,10,'/','/',' ','T','E','M','P',':',' ','T','h','e','s','e',' ','a','r','e',' ','n','e','c','e','s','s','a','r','y',' ','f','o','r',' ','F','o','g',' ','a','n','d',' ','D','i','s','p','l','a','c','e','m','e','n','t',':',13,10,' ',' ',' ',' ','u','n','i','f','o','r','m',' ','m','a','t','4',' ','M','o','d','e','l','V','i','e','w','M','a','t','r','i','x',';',' ','/','/',13,10,' ',' ',' ',' ',13,10,'/','/',' ','T','E','M','P',':',' ','T','h','e','s','e',' ','a','r','e',' ','n','e','c','e','s','s','a','r','y',' ','f','o','r',' ','F','o','g',':',13,10,' ',' ',' ',' ','u','n','i','f','o','r','m',' ','f','l','o','a','t',' ','f','o','g','_','d','e','n','s','i','t','y',' ','=',' ','0','.','0','0','0','5',';',' ','/','/',13,10,13,10,'/','/',' ','T','E','M','P',':',' ','T','h','e','s','e',' ','a','r','e',' ','n','e','c','e','s','s','a','r','y',' ','f','o','r',' ','d','i','s','p','l','a','c','e','m','e','n','t',':',13,10,' ',' ',' ',' ','u','n','i','f','o','r','m',' ','s','a','m','p','l','e','r','2','D',' ','d','e','t','a','i','l','s','T','U',';',13,10,' ',' ',' ',' ','u','n','i','f','o','r','m',' ','s','a','m','p','l','e','r','2','D',' ','d','e','t','a','i','l','s','D','x','T','U',';',13,10,' ',' ',' ',' ','u','n','i','f','o','r','m',' ','s','a','m','p','l','e','r','2','D',' ','d','e','t','a','i','l','s','D','y','T','U',';',13,10,' ',' ',' ',' ','u','n','i','f','o','r','m',' ','f','l','o','a','t',' ','k','e','r','n','e','l','S','i','z','e',';',' ','/','/',13,10,' ',' ',' ',' ','u','n','i','f','o','r','m',' ','f','l','o','a','t',' ','d','i','s','p','l','a','c','e','m','e','n','t','R','a','n','g','e',' ','=',' ','1','.','0',';',' ','/','/',13,10,' ',' ',' ',' ',13,10,'u','n','i','f','o','r','m',' ','v','e','c','4',' ','d','e','f','a','u','l','t','C','o','l','o','r','R',' ','=',' ','v','e','c','4','(','0','.','3','6',',',' ','0','.','3','0',',',' ','0','.','2','6',',',' ','0','.','0',')',';',' ','/','/',' ','L','i','g','h','t',' ','s','t','o','n','e',13,10,'u','n','i','f','o','r','m',' ','v','e','c','4',' ','d','e','f','a','u','l','t','C','o','l','o','r','G',' ','=',' ','v','e','c','4','(','0','.','2','8',',',' ','0','.','2','4',',',' ','0','.','2','0',',',' ','0','.','0',')',';',' ','/','/',' ','P','e','b','b','l','e','s',13,10,'u','n','i','f','o','r','m',' ','v','e','c','4',' ','d','e','f','a','u','l','t','C','o','l','o','r','B',' ','=',' ','v','e','c','4','(','0','.','3','4',',',' ','0','.','2','6',',',' ','0','.','2','2',',',' ','0','.','0',')',';',' ','/','/',' ','B','r','o','w','n','i','s','h',' ','s','t','o','n','e',13,10,'u','n','i','f','o','r','m',' ','v','e','c','4',' ','d','e','f','a','u','l','t','C','o','l','o','r','A',' ','=',' ','v','e','c','4','(','0','.','5','0',',',' ','0','.','3','8',',',' ','0','.','3','0',',',' ','0','.','0',')',';',' ','/','/',' ','D','i','r','t','y',' ','s','a','n','d',13,10,13,10,'/','/',' ','I','N','P','U','T',':',13,10,'l','a','y','o','u','t','(','q','u','a','d','s',',',' ','f','r','a','c','t','i','o','n','a','l','_','o','d','d','_','s','p','a','c','i','n','g',',',' ','c','c','w',')',' ','i','n',';',9,13,10,'i','n',' ','v','e','c','3',' ','t','P','o','s','i','t','i','o','n','[',']',';',13,10,13,10,'/','/',' ','O','U','T','P','U','T',':',13,10,'o','u','t',' ','V','e','r','t','e','x','D','a','t','a',' ','{',13,10,9,'v','e','c','4',' ','p','o','s','i','t','i','o','n',';',13,10,9,'v','e','c','4',' ','g','r','a','d','i','e','n','t',';',13,10,9,'v','e','c','4',' ','c','o','l','o','r',';',13,10,9,'v','e','c','4',' ','m','i','x','m','a','p',';',13,10,'}',' ','t','V','e','r','t','e','x',';',13,10,'/','/',' ','g','l','_','P','o','s','i','t','i','o','n',13,10,13,10,13,10,13,10,13,10,'/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/',13,10,'/','/',' ','C','o','m','m','o','n',' ','f','u','n','c','t','i','o','n','s',13,10,'/','/',13,10,'v','e','c','3',' ','g','e','t','T','r','i','p','l','a','n','a','r','W','e','i','g','h','t','V','e','c','t','o','r','(','v','e','c','3',' ','N',')',' ','{',13,10,' ',' ',' ',' ','v','e','c','3',' ','w',' ','=',' ','p','o','w','(','a','b','s','(','N',')',',',' ','v','e','c','3','(','6','4','.','0',')',')',';',' ',13,10,' ',' ',' ',' ','/','/',' ','w',' ','=',' ','m','a','x','(','w',',',' ','0','.','0','0','0','0','0','0','0','0','0','0','0','0','0','0','1',')',';',' ',13,10,' ',' ',' ',' ','r','e','t','u','r','n',' ','w',' ','/',' ','d','o','t','(','w',',',' ','v','e','c','3','(','1','.','0',')',')',';',13,10,'}',13,10,13,10,'v','e','c','4',' ','t','e','x','t','u','r','e','T','r','i','p','l','a','n','a','r','(','s','a','m','p','l','e','r','2','D',' ','d','e','t','a','i','l','s','T','U',',',' ','v','e','c','3',' ','p','o','s','i','t','i','o','n',',',' ','v','e','c','3',' ','w','e','i','g','h','t',',',' ','f','l','o','a','t',' ','l','o','d','B','i','a','s',')',13,10,'{',13,10,' ',' ',' ',' ','r','e','t','u','r','n',' ','w','e','i','g','h','t','.','x','*','t','e','x','t','u','r','e','L','o','d','(','d','e','t','a','i','l','s','T','U',',',' ','p','o','s','i','t','i','o','n','.','z','y',',',' ','l','o','d','B','i','a','s',')',' ',13,10,' ',' ',' ',' ',' ',' ',' ',' ',' ','+',' ','w','e','i','g','h','t','.','y','*','t','e','x','t','u','r','e','L','o','d','(','d','e','t','a','i','l','s','T','U',',',' ','p','o','s','i','t','i','o','n','.','z','x',',',' ','l','o','d','B','i','a','s',')',' ',13,10,' ',' ',' ',' ',' ',' ',' ',' ',' ','+',' ','w','e','i','g','h','t','.','z','*','t','e','x','t','u','r','e','L','o','d','(','d','e','t','a','i','l','s','T','U',',',' ','p','o','s','i','t','i','o','n','.','x','y',',',' ','l','o','d','B','i','a','s',')',';',13,10,'}',13,10,13,10,'/','/',' ','h','t','t','p','s',':','/','/','w','w','w','.','s','h','a','d','e','r','t','o','y','.','c','o','m','/','v','i','e','w','/','M','s','3','y','z','S',13,10,'v','e','c','4',' ','b','l','e','n','d','M','i','x','m','a','p','(','v','e','c','4',' ','m','i','x','m','a','p',')',' ',13,10,'{',13,10,' ',' ',' ',' ','c','o','n','s','t',' ','f','l','o','a','t',' ','M','i','x','m','a','p','B','l','e','n','d','i','n','g',' ','=',' ','0','.','5',';',' ','/','/',' ','0','.','0',' ','s','h','a','r','p',',',' ','0','.','5',' ','s','m','o','o','t','h',',',' ','1','.','0',' ','s','m','o','o','t','h','e','r',13,10,' ',' ',' ',' ','f','l','o','a','t',' ','m','a','x','i','m','a',' ','=',' ','m','a','x','(','m','a','x','(','m','i','x','m','a','p','.','x',',',' ','m','i','x','m','a','p','.','y',')',',',' ','m','a','x','(','m','i','x','m','a','p','.','z',',',' ','m','i','x','m','a','p','.','w',')',')',';',13,10,' ',' ',' ',' ','m','i','x','m','a','p',' ','=',' ','m','a','x','(','m','i','x','m','a','p',' ','-',' ','m','a','x','i','m','a',' ','+',' ','M','i','x','m','a','p','B','l','e','n','d','i','n','g',',',' ','v','e','c','4','(','0','.','0',')',')',';',13,10,' ',' ',' ',' ','m','i','x','m','a','p',' ','/','=',' ','d','o','t','(','m','i','x','m','a','p',',',' ','v','e','c','4','(','1','.','0',')',')',';',13,10,' ',' ',' ',' ','r','e','t','u','r','n',' ','m','i','x','m','a','p',';',13,10,'}',13,10,13,10,'v','e','c','4',' ','b','l','e','n','d','C','o','l','o','r','(','v','e','c','4',' ','c','o','l','o','r',',',' ','v','e','c','4',' ','m','i','x','m','a','p',',',' ','f','l','o','a','t',' ','x','1',',',' ','f','l','o','a','t',' ','x','2',')',13,10,'{',' ',' ',' ',' ',13,10,' ',' ',' ',' ','c','o','l','o','r',' ','=',' ','m','i','x','(','c','o','l','o','r',',',' ','d','e','f','a','u','l','t','C','o','l','o','r','R',',',' ','s','m','o','o','t','h','s','t','e','p','(','x','1',',',' ','x','2',',',' ','m','i','x','m','a','p','.','r',')',')',13,10,' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','+',' ','m','i','x','(','c','o','l','o','r',',',' ','d','e','f','a','u','l','t','C','o','l','o','r','G',',',' ','s','m','o','o','t','h','s','t','e','p','(','x','1',',',' ','x','2',',',' ','m','i','x','m','a','p','.','g',')',')',13,10,' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','+',' ','m','i','x','(','c','o','l','o','r',',',' ','d','e','f','a','u','l','t','C','o','l','o','r','B',',',' ','s','m','o','o','t','h','s','t','e','p','(','x','1',',',' ','x','2',',',' ','m','i','x','m','a','p','.','b',')',')',13,10,' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','+',' ','m','i','x','(','c','o','l','o','r',',',' ','d','e','f','a','u','l','t','C','o','l','o','r','A',',',' ','s','m','o','o','t','h','s','t','e','p','(','x','1',',',' ','x','2',',',' ','m','i','x','m','a','p','.','a',')',')',';',13,10,' ',' ',' ',' ','r','e','t','u','r','n',' ','c','o','l','o','r','/','4','.','0',';',13,10,'}',13,10,13,10,'/','/',' ','h','t','t','p',':','/','/','w','e','b','e','r','.','i','t','n','.','l','i','u','.','s','e','/','~','s','t','e','g','u','/','T','N','M','0','8','4','-','2','0','1','7','/','b','u','m','p','m','a','p','p','i','n','g','/','b','u','m','p','m','a','p','p','i','n','g','.','p','d','f',13,10,'/','/',' ','A','l','s','o',' ','c','h','e','c','k',' ','d','o','B','u','m','p','M','a','p','(',')',' ','i','n',' ','D','e','s','e','r','t',' ','C','a','n','y','o','n',' ','(','h','t','t','p','s',':','/','/','w','w','w','.','s','h','a','d','e','r','t','o','y','.','c','o','m','/','v','i','e','w','/','X','s','3','3','D','f',')',13,10,'v','o','i','d',' ','d','i','s','p','l','a','c','e','V','e','r','t','e','x','A','n','d','R','e','c','o','m','p','u','t','e','N','o','r','m','a','l','(','i','n','o','u','t',' ','v','e','c','3',' ','p',',',' ','i','n','o','u','t',' ','v','e','c','3',' ','N',',',' ','f','l','o','a','t',' ','H',',',' ','v','e','c','3',' ','d','H',')',13,10,'{',13,10,' ',' ',' ',' ','p',' ','=',' ','p',' ','+',' ','H','*','N',';',13,10,' ',' ',' ',' ','N',' ','=',' ','n','o','r','m','a','l','i','z','e','(',' ','(','1','.','0',' ','+',' ','d','o','t','(','d','H',',','N',')',')','*','N',' ','-',' ','d','H',' ',')',';',13,10,'}',13,10,'/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/',13,10,13,10,13,10,'v','o','i','d',' ','m','a','i','n','(',')',13,10,'{',13,10,9,'f','l','o','a','t',' ','u',' ','=',' ','g','l','_','T','e','s','s','C','o','o','r','d','.','x',';',13,10,' ',' ',' ',' ','f','l','o','a','t',' ','v',' ','=',' ','g','l','_','T','e','s','s','C','o','o','r','d','.','y',';',13,10,' ',' ',' ',' ',13,10,' ',' ',' ',' ','v','e','c','3',' ','p','o','s','i','t','i','o','n',' ','=',' ','m','i','x','(','m','i','x','(','t','P','o','s','i','t','i','o','n','[','1',']',',','t','P','o','s','i','t','i','o','n','[','0',']',',','u',')',',',' ','m','i','x','(','t','P','o','s','i','t','i','o','n','[','2',']',',','t','P','o','s','i','t','i','o','n','[','3',']',',','u',')',',',' ','v',')',';',13,10,9,'v','e','c','2',' ','p',' ','=',' ','(','p','o','s','i','t','i','o','n','.','x','y','*','(','t','i','l','e','S','i','z','e','-','1',')',' ','+',' ','0','.','5',')','/','t','i','l','e','S','i','z','e',';',13,10,9,'v','e','c','4',' ','g','r','a','d','i','e','n','t',' ','=',' ','t','e','x','t','u','r','e','L','o','d','(','g','r','a','d','i','e','n','t','s','T','U',',',' ','p',',',' ','0',')',';',' ',13,10,9,'v','e','c','4',' ','c','o','l','o','r',' ','=',' ','t','e','x','t','u','r','e','L','o','d','(','c','o','l','o','r','s','T','U',',',' ',' ','p',',',' ','0',')',';',' ',13,10,9,'v','e','c','4',' ','m','i','x','m','a','p',9,'=',' ','t','e','x','t','u','r','e','L','o','d','(','m','i','x','m','a','p','s','T','U',',',' ','p',',',' ','0',')',';',13,10,9,'v','e','c','2',' ','c','o','o','r','d','s',' ','=',' ','p','o','s','i','t','i','o','n','.','x','y',' ','*',' ','s','c','a','l','e',';',9,'/','/',' ','T','O','D','O',' ','n','e','e','d','e','d','?',13,10,13,10,' ',' ',' ',' ','/','/',' ','U','s','e','d',' ','f','o','r',' ','D','i','s','p','l','a','c','e','m','e','n','t',' ','a','n','d',' ','a','l','s','o',' ','f','o','r',' ','F','o','g',' ','l','a','t','e','r','.',13,10,' ',' ',' ',' ','/','/',' ','T','O','D','O',' ','C','o','m','p','u','t','e',' ','a','t',' ','v','e','r','t','e','x',' ','s','h','a','d','e','r',' ','(','i','t',39,'s',' ','E',' ','v','e','c','t','o','r',')','.',13,10,' ',' ',' ',' ','f','l','o','a','t',' ','p','o','v','D','i','s','t','a','n','c','e',' ','=',' ','l','e','n','g','t','h','(','(','M','o','d','e','l','V','i','e','w','M','a','t','r','i','x',' ','*',' ','v','e','c','4','(','p','o','s','i','t','i','o','n',',','1',')',')','.','x','y','z',')',';',13,10,9,9,13,10,'#','i','f',' ','1',' ',' ',' ','/','/',' ','D','i','s','p','l','a','c','e',' ','p','o','s','i','t','i','o','n',' ','a','l','o','n','g',' ','t','h','e',' ','n','o','r','m','a','l',' ','i','n',' ','L','O','D',' ','z','e','r','o','.',13,10,9,' ',' ',' ',' ','f','l','o','a','t',' ','d','i','s','p','l','a','c','e','m','e','n','t',' ','=',' ','1','.','0',' ','-',' ','s','m','o','o','t','h','s','t','e','p','(','0','.','0',',',' ','d','i','s','p','l','a','c','e','m','e','n','t','R','a','n','g','e','*','(','k','e','r','n','e','l','S','i','z','e','-','1',')',',',' ','p','o','v','D','i','s','t','a','n','c','e',')',';',13,10,9,' ',' ',' ',' ','i','f','(',' ','d','i','s','p','l','a','c','e','m','e','n','t',' ','>',' ','0','.','0',' ','/','/',' ','O','n','l','y',' ','w','i','t','h','i','n',' ','t','h','e',' ','1','s','t',' ','L','O','D',' ','(','o','t','h','e','r','w','i','s','e',' ','y','o','u',' ','g','e','t',' ','c','r','a','c','k','s',')','.',13,10,' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','&','&',' ','c','o','l','o','r','.','a',' ','=','=',' ','0','.','0',' ',')',' ','/','/',' ','O','n','l','y',' ','f','o','r',' ','n','o','n',' ','w','a','t','e','r',' ','s','u','r','f','a','c','e','s',13,10,9,' ',' ',' ',' ','{',' ',13,10,9,' ',' ',' ',' ',13,10,9,' ',' ',' ',' ',9,'c','o','n','s','t',' ','f','l','o','a','t',' ','L','o','d','B','i','a','s',' ','=',' ','0','.','0',';',13,10,9,' ',' ',' ',' ',9,'v','e','c','3',' ','n','o','r','m','a','l',' ','=',' ','n','o','r','m','a','l','i','z','e','(','v','e','c','3','(','g','r','a','d','i','e','n','t','.','x','y','/','s','c','a','l','e',',',' ','1',')',')',';',13,10,' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','v','e','c','3',' ','w',' ','=',' ','g','e','t','T','r','i','p','l','a','n','a','r','W','e','i','g','h','t','V','e','c','t','o','r','(','n','o','r','m','a','l',')',';',13,10,' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','v','e','c','4',' ','l','u','m','a','4',' ','=',' ','t','e','x','t','u','r','e','T','r','i','p','l','a','n','a','r','(','d','e','t','a','i','l','s','T','U',',',' ','p','o','s','i','t','i','o','n','.','x','y','z',',',' ','w',',',' ','L','o','d','B','i','a','s',')',';',' ',' ',' ',' ',13,10,' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','v','e','c','4',' ','m','i','x','m','a','p',' ','=',' ','b','l','e','n','d','M','i','x','m','a','p','(','m','i','x','m','a','p',' ','+',' ','l','u','m','a','4',')',';',13,10,' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','f','l','o','a','t',' ','l','u','m','a',' ','=',' ','0','.','2',';',13,10,' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','v','e','c','4',' ','l','u','m','a','4','D','x',' ','=',' ','t','e','x','t','u','r','e','T','r','i','p','l','a','n','a','r','(','d','e','t','a','i','l','s','D','x','T','U',',',' ','p','o','s','i','t','i','o','n','.','x','y','z',',',' ','w',',',' ','L','o','d','B','i','a','s',')',';',13,10,9,9,' ',' ',' ',' ','v','e','c','4',' ','l','u','m','a','4','D','y',' ','=',' ','t','e','x','t','u','r','e','T','r','i','p','l','a','n','a','r','(','d','e','t','a','i','l','s','D','y','T','U',',',' ','p','o','s','i','t','i','o','n','.','x','y','z',',',' ','w',',',' ','L','o','d','B','i','a','s',')',';',13,10,13,10,' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','f','l','o','a','t',' ','H',' ','=',' ','0','.','0','1','*','d','o','t','(','m','i','x','m','a','p',',',' ','l','u','m','a','4',')',';',13,10,9,9,9,'v','e','c','3',' ','d','H',' ','=',' ','v','e','c','3','(',13,10,9,9,9,' ',' ',' ',' ','d','o','t','(','m','i','x','m','a','p',',',' ','l','u','m','a','4','D','x',')',',',13,10,9,9,9,' ',' ',' ',' ','d','o','t','(','m','i','x','m','a','p',',',' ','l','u','m','a','4','D','y',')',',',13,10,9,9,9,' ',' ',' ',' ','0','.','0',' ','/','/',' ','D','z',' ','d','o','e','s','n',39,'t',' ','m','a','t','t','e','r',' ','b','e','c','a','u','s','e',' ','i','t',39,'s',' ','t','e','x','t','u','r','e',' ','m','a','p','p','i','n','g',',',' ','n','o',' ','r','e','l','i','e','f',' ','h','e','r','e','.',13,10,9,9,9,')',';',13,10,13,10,9,9,9,'v','e','c','3',' ','p','o','s','i','t','i','o','n','1',' ','=',' ','p','o','s','i','t','i','o','n','.','x','y','z',';',13,10,9,9,9,'v','e','c','3',' ','n','o','r','m','a','l','1',' ',' ',' ','=',' ','n','o','r','m','a','l','.','x','y','z',';',13,10,' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','d','i','s','p','l','a','c','e','V','e','r','t','e','x','A','n','d','R','e','c','o','m','p','u','t','e','N','o','r','m','a','l','(','p','o','s','i','t','i','o','n','1',',',' ','n','o','r','m','a','l','1',',',' ','H',',',' ','d','H',')',';',13,10,9,' ',' ',' ',' ',13,10,9,' ',' ',' ',' ',' ',' ',' ',' ','c','o','l','o','r',' ','+','=',' ','0','.','0','0','0','0','0','0','0','0','0','0','1','*','b','l','e','n','d','C','o','l','o','r','(','c','o','l','o','r',',',' ','m','i','x','m','a','p',',',' ','0','.','3',',',' ','0','6',')',';',13,10,9,' ',' ',' ',' ',13,10,'/','*',9,' ',' ',' ',' ',' ',' ',' ',' ','v','e','c','4',' ','d','e','t','a','i','l','s',' ','=',' ','p','o','w','(','t','e','x','t','u','r','e','(','d','e','t','a','i','l','s','T','U',',',' ','c','o','o','r','d','s','.','x','y',',',' ','+','4','.','5',')',',',' ','v','e','c','4','(','1','.','0',')',')',';',13,10,9,9,' ',' ',' ',' ',13,10,9,' ',' ',' ',' ',' ',' ',' ',' ','v','e','c','4',' ','d','i','s','p','l','a','c','e','m','e','n','t','W','e','i','g','h','t','s',' ','=',' ','v','e','c','4','(','0','.','1','2','0',',',' ','0','.','0','4','0',',',' ','0','.','0','3','0',',',' ','0','.','0','5','0',')',';',13,10,9,' ',' ',' ',' ',' ',' ',' ',' ','f','l','o','a','t',' ','e','x','t','r','u','s','i','o','n',' ','=',' ','d','o','t','(','d','i','s','p','l','a','c','e','m','e','n','t','W','e','i','g','h','t','s',',',' ','m','i','x','m','a','p',')',';',13,10,9,' ',' ',' ',' ',' ',' ',' ',' ','f','l','o','a','t',' ','l','u','m','a',' ','=',' ','e','x','t','r','u','s','i','o','n',' ','*',' ','d','o','t','(','d','e','t','a','i','l','s',',',' ','m','i','x','m','a','p',')',';',13,10,9,' ',' ',' ',' ',' ',' ',' ',' ','l','u','m','a',' ','=',' ','(','l','u','m','a',' ','-',' ','e','x','t','r','u','s','i','o','n','/','2',')',' ','*',' ','d','i','s','p','l','a','c','e','m','e','n','t',';',13,10,' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','v','e','c','3',' ','N',' ','=',' ','n','o','r','m','a','l','i','z','e','(','v','e','c','3','(','g','r','a','d','i','e','n','t','.','x','y',',',' ','1',')',')',';',13,10,9,9,' ',' ',' ',' ','p','o','s','i','t','i','o','n',' ','+','=',' ','l','u','m','a',' ','*',' ','N',';',13,10,' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','#','i','f',' ','0',' ',' ','/','/',' ','R','e','-','a','d','j','u','s','t','i','n','g',' ','g','r','a','d','i','e','n','t',' ','a','f','t','e','r',' ','d','i','s','p','l','a','c','e','m','e','n','t',13,10,' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','/','/',' ','F','I','X',' ','D','i','s','c','o','n','t','i','n','u','i','t','y',13,10,9,9,' ',' ',' ',' ',' ',' ',' ',' ','g','r','a','d','i','e','n','t','.','x','y',' ','+','=',' ','(','1','.','0',' ','+',' ','d','o','t','(','l','u','m','a','*','g','r','a','d','i','e','n','t','.','x','y',',','N','.','x','y',')',')','*','N','.','x','y',' ','-',' ','l','u','m','a','*','g','r','a','d','i','e','n','t','.','x','y',';',13,10,' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','#','e','n','d','i','f',' ',13,10,' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','*','/',13,10,9,' ',' ',' ',' ','}',9,' ',' ',' ',' ',13,10,'#','e','n','d','i','f',' ',' ',13,10,13,10,13,10,9,'/','/',' ','O','u','t','p','u','t',' ','v','e','r','t','e','x',13,10,9,'t','V','e','r','t','e','x','.','p','o','s','i','t','i','o','n',' ','=',' ','v','e','c','4','(','c','o','o','r','d','s',',',' ','p','o','s','i','t','i','o','n','.','z',',',9,'p','o','v','D','i','s','t','a','n','c','e',' ',')',';',' ','/','/',' ','T','O','D','O',':',' ','p','o','v','D','i','s','t','a','n','c','e',' ','i','s',' ','n','o','t',' ','c','u','r','r','e','n','t','l','y',' ','u','s','e','d',' ','d','o','w','n',' ','t','h','e',' ','p','i','p','e','l','i','n','e',13,10,9,'t','V','e','r','t','e','x','.','g','r','a','d','i','e','n','t',' ','=',' ','g','r','a','d','i','e','n','t',';',13,10,' ',' ',' ',' ','t','V','e','r','t','e','x','.','c','o','l','o','r',9,' ','=',' ','c','o','l','o','r',';',13,10,9,'t','V','e','r','t','e','x','.','m','i','x','m','a','p',9,' ','=',' ','m','i','x','m','a','p',';',13,10,' ',' ',' ',' ','g','l','_','P','o','s','i','t','i','o','n',' ','=',' ','v','e','c','4','(','p','o','s','i','t','i','o','n',',',' ','1','.','0',')',';',13,10,'}',13,10,13,10,13,10,'G','E','O','M','E','T','R','Y',':',13,10,'#','v','e','r','s','i','o','n',' ','4','0','0',' ',' ',' ',' ',' ',13,10,'/','/',' ','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',13,10,'/','/',' ',' ',' ','_','_','_','_','_',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','_',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','_','_','_','_','_',' ','_',' ',' ',' ',' ',' ',' ',' ',' ',' ','_',' ',' ',' ',' ',' ',' ',' ',' ',' ',13,10,'/','/',' ',' ','|',' ',' ',' ','_','_','|','_','_','_',' ','_','_','_',' ','_','_','_','_','_',' ','_','_','_','|',' ','|','_',' ','_','_','_',' ','_',' ','_',' ',' ',' ','|',' ',' ',' ','_','_','|',' ','|','_',' ','_','_','_',' ','_','|',' ','|','_','_','_',' ','_','_','_',' ',13,10,'/','/',' ',' ','|',' ',' ','|',' ',' ','|',' ','-','_','|',' ','.',' ','|',' ',' ',' ',' ',' ','|',' ','-','_','|',' ',' ','_','|',' ',' ','_','|',' ','|',' ','|',' ',' ','|','_','_',' ',' ',' ','|',' ',' ',' ','|',' ','.',39,'|',' ','.',' ','|',' ','-','_','|',' ',' ','_','|',13,10,'/','/',' ',' ','|','_','_','_','_','_','|','_','_','_','|','_','_','_','|','_','|','_','|','_','|','_','_','_','|','_','|',' ','|','_','|',' ','|','_',' ',' ','|',' ',' ','|','_','_','_','_','_','|','_','|','_','|','_','_',',','|','_','_','_','|','_','_','_','|','_','|',' ',' ',13,10,'/','/',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','|','_','_','_','|',' ',' ',' ',13,10,'/','/',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',13,10,'/','/',' ','T','r','a','n','s','f','o','r','m','s',' ','f','r','o','m',' ','m','o','d','e','l',' ','s','p','a','c','e',' ','t','o',' ','w','o','r','l','d',' ','s','p','a','c','e','.',13,10,'/','/',' ','T','O','D','O',':',' ','I','n','s','e','r','t',' ','d','e','t','a','i','l','.',13,10,'/','/',' ',13,10,'u','n','i','f','o','r','m',' ','m','a','t','3',' ','N','o','r','m','a','l','M','a','t','r','i','x',';',13,10,'u','n','i','f','o','r','m',' ','m','a','t','4',' ','M','o','d','e','l','V','i','e','w','M','a','t','r','i','x',';',13,10,'u','n','i','f','o','r','m',' ','m','a','t','4',' ','M','o','d','e','l','V','i','e','w','P','r','o','j','e','c','t','i','o','n','M','a','t','r','i','x',';',13,10,'u','n','i','f','o','r','m',' ','v','e','c','4',' ','L','i','g','h','t','0','_','p','o','s','i','t','i','o','n',';',' ','/','/',13,10,'u','n','i','f','o','r','m',' ','f','l','o','a','t',' ','s','c','a','l','e',';',' ','/','/',13,10,13,10,'l','a','y','o','u','t','(','t','r','i','a','n','g','l','e','s',')',' ','i','n',';',13,10,'l','a','y','o','u','t','(','t','r','i','a','n','g','l','e','_','s','t','r','i','p',',',' ','m','a','x','_','v','e','r','t','i','c','e','s',' ','=',' ','3',')',' ','o','u','t',';',13,10,' ',13,10,'i','n',' ','V','e','r','t','e','x','D','a','t','a',' ','{',13,10,9,'v','e','c','4',' ','p','o','s','i','t','i','o','n',';',13,10,9,'v','e','c','4',' ','g','r','a','d','i','e','n','t',';',13,10,9,'v','e','c','4',' ','c','o','l','o','r',';',13,10,9,'v','e','c','4',' ','m','i','x','m','a','p',';',13,10,'}',' ','t','V','e','r','t','e','x','[',']',';',13,10,13,10,'o','u','t',' ','V','e','r','t','e','x','D','a','t','a',' ','{',13,10,9,'v','e','c','4',' ','p','o','s','i','t','i','o','n',';',' ',' ','/','/',' ','P','o','s','i','t','i','o','n',' ','i','n',' ','m','o','d','e','l',' ','s','p','a','c','e',13,10,9,'v','e','c','4',' ','g','r','a','d','i','e','n','t',';',' ',' ','/','/',' ','G','r','a','d','i','e','n','t','s',' ','(','T','0',' ','a','n','d',' ','T','1',')',13,10,9,'v','e','c','4',' ','c','o','l','o','r',';',13,10,9,'v','e','c','4',' ','m','i','x','m','a','p',';',13,10,9,'v','e','c','3',' ','N','0',';',' ',' ',' ',' ',' ',' ',' ',' ','/','/',' ','T','E','M','P','?',13,10,9,'v','e','c','3',' ','E',';',9,9,' ',' ',' ',' ','/','/',' ','P','o','s','i','t','i','o','n',' ','i','n',' ','w','o','r','l','d',' ','s','p','a','c','e',13,10,9,'v','e','c','3',' ','L',';',' ',' ',' ',' ',' ',' ',' ',' ',' ','/','/',' ','L','i','g','h','t',' ','i','n',' ','w','o','r','l','d',' ','s','p','a','c','e',13,10,9,'v','e','c','3',' ','b','a','r','y','c','e','n','t','r','i','c',';',13,10,'}',' ','g','V','e','r','t','e','x',';',13,10,9,13,10,'v','o','i','d',' ','m','a','i','n','(',')',' ',13,10,'{',13,10,9,'f','o','r','(','i','n','t',' ','i','=','0',';',' ','i','<','g','l','_','i','n','.','l','e','n','g','t','h','(',')',';',' ','i','+','+',')',' ',13,10,9,'{',13,10,9,9,'g','V','e','r','t','e','x','.','p','o','s','i','t','i','o','n',' ',' ',' ',' ','=',' ','t','V','e','r','t','e','x','[','i',']','.','p','o','s','i','t','i','o','n',';',13,10,9,9,'g','V','e','r','t','e','x','.','g','r','a','d','i','e','n','t',9,'=',' ','t','V','e','r','t','e','x','[','i',']','.','g','r','a','d','i','e','n','t',';',' ',13,10,9,9,'g','V','e','r','t','e','x','.','c','o','l','o','r',9,9,'=',' ','t','V','e','r','t','e','x','[','i',']','.','c','o','l','o','r',';',13,10,9,9,'g','V','e','r','t','e','x','.','m','i','x','m','a','p',9,9,'=',' ','t','V','e','r','t','e','x','[','i',']','.','m','i','x','m','a','p',';',13,10,9,9,13,10,9,9,'g','V','e','r','t','e','x','.','N','0',9,'=',' ','N','o','r','m','a','l','M','a','t','r','i','x',' ','*',' ','n','o','r','m','a','l','i','z','e','(','v','e','c','3','(','t','V','e','r','t','e','x','[','i',']','.','g','r','a','d','i','e','n','t','.','z','w',',',' ','1',')',')',';',13,10,9,9,'g','V','e','r','t','e','x','.','E',9,'=',' ','(','M','o','d','e','l','V','i','e','w','M','a','t','r','i','x',' ','*',' ','g','l','_','i','n','[','i',']','.','g','l','_','P','o','s','i','t','i','o','n',')','.','x','y','z',';',' ','/','/',' ','l','e','n','g','t','h',' ','o','f',' ','i','t',',',' ','i','s',' ','p','o','v','D','i','s','t','a','n','c','e',13,10,9,9,'g','V','e','r','t','e','x','.','L',9,'=',' ','(','M','o','d','e','l','V','i','e','w','M','a','t','r','i','x',' ','*',' ','v','e','c','4','(','L','i','g','h','t','0','_','p','o','s','i','t','i','o','n','.','x','y','/','s','c','a','l','e',',',' ','L','i','g','h','t','0','_','p','o','s','i','t','i','o','n','.','z','w',')',')','.','x','y','z',';',9,'/','/',' ','T','O','D','O',' ','p','r','e','c','o','m','p','u','t','e','?',13,10,13,10,9,9,'g','V','e','r','t','e','x','.','b','a','r','y','c','e','n','t','r','i','c',' ','=',9,'i',' ','=','=',' ','0',' ','?',' ','v','e','c','3','(','1',',','0',',','0',')',' ',':',' ',13,10,9,9,9,9,9,9,9,9,'i',' ','=','=',' ','1',' ','?',' ','v','e','c','3','(','0',',','1',',','0',')',' ',':',' ',13,10,9,9,9,9,9,9,9,9,9,9,' ','v','e','c','3','(','0',',','0',',','1',')',' ',';',13,10,9,9,9,9,9,9,9,9,9,9,' ',13,10,9,9,'g','l','_','P','o','s','i','t','i','o','n',9,'=',' ','M','o','d','e','l','V','i','e','w','P','r','o','j','e','c','t','i','o','n','M','a','t','r','i','x',' ','*',' ','g','l','_','i','n','[','i',']','.','g','l','_','P','o','s','i','t','i','o','n',';',13,10,9,9,'E','m','i','t','V','e','r','t','e','x','(',')',';',13,10,9,'}',13,10,9,'E','n','d','P','r','i','m','i','t','i','v','e','(',')',';',13,10,'}',13,10,13,10,13,10,'F','R','A','G','M','E','N','T',':',13,10,'#','v','e','r','s','i','o','n',' ','4','0','0',' ',' ',13,10,'/','/',' ','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=','=',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',13,10,'/','/',' ',' ',' ','_','_','_','_','_',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','_',' ',' ',' ',' ',' ',' ','_','_','_','_','_',' ','_',' ',' ',' ',' ',' ',' ',' ',' ',' ','_',' ',' ',' ',' ',' ',' ',' ',' ',' ',13,10,'/','/',' ',' ','|',' ',' ',' ','_','_','|','_','_','_',' ','_','_','_',' ','_','_','_',' ','_','_','_','_','_',' ','_','_','_',' ','_','_','_','|',' ','|','_',' ',' ',' ','|',' ',' ',' ','_','_','|',' ','|','_',' ','_','_','_',' ','_','|',' ','|','_','_','_',' ','_','_','_',' ',13,10,'/','/',' ',' ','|',' ',' ',' ','_','_','|',' ',' ','_','|',' ','.',39,'|',' ','.',' ','|',' ',' ',' ',' ',' ','|',' ','-','_','|',' ',' ',' ','|',' ',' ','_','|',' ',' ','|','_','_',' ',' ',' ','|',' ',' ',' ','|',' ','.',39,'|',' ','.',' ','|',' ','-','_','|',' ',' ','_','|',13,10,'/','/',' ',' ','|','_','_','|',' ',' ','|','_','|',' ','|','_','_',',','|','_',' ',' ','|','_','|','_','|','_','|','_','_','_','|','_','|','_','|','_','|',' ',' ',' ',' ','|','_','_','_','_','_','|','_','|','_','|','_','_',',','|','_','_','_','|','_','_','_','|','_','|',' ',' ',13,10,'/','/',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','|','_','_','_','|',' ',' ',' ',' ',' ',13,10,'/','/',' ',13,10,'/','/',' ','P','a','r','a','l','l','a','x',' ','m','a','p','p','i','n','g',',',' ','b','u','m','p',' ','m','a','p','p','i','n','g',',',' ','t','e','x','t','u','r','e',' ','m','a','p','p','i','n','g',',',' ','A','O',',',' ',13,10,'/','/',' ','d','i','f','f','u','s','e',',',' ','s','p','e','c','u','l','a','r',',',' ','i','n','d','i','r','e','c','t',' ','l','i','g','h','t',',',' ','a','t','m','o','s','p','h','e','r','i','c',' ','s','c','a','t','t','e','r','i','n','g',',',' ',13,10,'/','/',' ','p','o','s','t',' ','e','f','f','e','c','t','s','.',13,10,9,' ',13,10,'/','/',' ','U','N','I','F','O','R','M','S',':',13,10,'u','n','i','f','o','r','m',' ','i','n','t',' ','W','i','r','e','f','r','a','m','e',' ',' ',' ','=',' ','0',';',13,10,'u','n','i','f','o','r','m',' ','i','n','t',' ','D','e','b','u','g','M','o','d','e',' ',' ',' ','=',' ','0',';',' ','c','o','n','s','t',' ','i','n','t',' ','C','o','l','o','r','V','i','e','w',' ','=',' ','1',',',' ','H','e','i','g','h','t','B','l','e','n','d','V','i','e','w',' ','=',' ','2',',',' ','L','i','g','h','t','V','i','e','w',' ','=',' ','3',',',' ','N','o','r','m','a','l','V','i','e','w',' ','=',' ','4',',',' ','F','r','e','s','n','e','l','V','i','e','w',' ','=',' ','5',';',' ',13,10,'u','n','i','f','o','r','m',' ','i','n','t',' ','B','u','m','p','s',' ',' ',' ',' ',' ',' ',' ','=',' ','1',';',' ','/','/','c','o','n','s','t',' ','i','n','t',' ','B','u','m','p','s','N','o','r','m','a','l',' ','=',' ','1',',',' ','B','u','m','p','s','M','i','c','r','o',' ','=',' ','2',';',13,10,'u','n','i','f','o','r','m',' ','i','n','t',' ','T','e','s','s','e','l','l','a','t','o','r',9,'=',' ','1',';',' ','/','/',' ','T','E','M','P',' ',13,10,'u','n','i','f','o','r','m',' ','i','n','t',' ','D','i','f','f','u','s','e',9,9,'=',' ','1',';',13,10,'u','n','i','f','o','r','m',' ','i','n','t',' ','S','p','e','c','u','l','a','r',9,'=',' ','1',';',13,10,'u','n','i','f','o','r','m',' ','i','n','t',' ','I','n','d','i','r','e','c','t',9,'=',' ','1',';',13,10,'u','n','i','f','o','r','m',' ','i','n','t',' ','S','k','y',9,9,9,'=',' ','1',';',9,13,10,'u','n','i','f','o','r','m',' ','i','n','t',' ','F','r','e','s','n','e','l',9,9,'=',' ','1',';',13,10,'u','n','i','f','o','r','m',' ','i','n','t',' ','S','h','a','d','o','w','s',9,9,'=',' ','1',';',13,10,'u','n','i','f','o','r','m',' ','i','n','t',' ','D','e','s','a','t','u','r','a','t','e',9,'=',' ','1',';',13,10,'u','n','i','f','o','r','m',' ','i','n','t',' ','S','c','a','t','t','e','r','i','n','g',9,'=',' ','1',';',13,10,'u','n','i','f','o','r','m',' ','i','n','t',' ','G','a','m','m','a',9,9,'=',' ','1',';',13,10,'u','n','i','f','o','r','m',' ','i','n','t',' ','C','o','n','t','r','a','s','t',9,'=',' ','1',';',13,10,'u','n','i','f','o','r','m',' ','i','n','t',' ','U','n','s','a','t','u','r','a','t','e',9,'=',' ','1',';',13,10,'u','n','i','f','o','r','m',' ','i','n','t',' ','T','i','n','t',9,9,'=',' ','1',';',13,10,'u','n','i','f','o','r','m',' ','i','n','t',' ','V','i','g','n','e','t','t','i','n','g',9,'=',' ','1',';',13,10,13,10,'u','n','i','f','o','r','m',' ','s','a','m','p','l','e','r','2','D',' ','d','e','t','a','i','l','s','T','U',';',13,10,'u','n','i','f','o','r','m',' ','s','a','m','p','l','e','r','2','D',' ','d','e','t','a','i','l','s','D','x','T','U',';',13,10,'u','n','i','f','o','r','m',' ','s','a','m','p','l','e','r','2','D',' ','d','e','t','a','i','l','s','D','y','T','U',';',13,10,13,10,'u','n','i','f','o','r','m',' ','f','l','o','a','t',' ','b','u','m','p','_','i','n','t','e','n','s','i','t','y',' ','=',' ','0','.','4','0','0',';',13,10,13,10,'u','n','i','f','o','r','m',' ','v','e','c','4',' ','d','e','f','a','u','l','t','C','o','l','o','r','R',' ','=',' ','v','e','c','4','(','0','.','3','6',',',' ','0','.','3','0',',',' ','0','.','2','6',',',' ','0','.','0',')',';',' ','/','/',' ','L','i','g','h','t',' ','s','t','o','n','e',13,10,'u','n','i','f','o','r','m',' ','v','e','c','4',' ','d','e','f','a','u','l','t','C','o','l','o','r','G',' ','=',' ','v','e','c','4','(','0','.','2','8',',',' ','0','.','2','4',',',' ','0','.','2','0',',',' ','0','.','0',')',';',' ','/','/',' ','P','e','b','b','l','e','s',13,10,'u','n','i','f','o','r','m',' ','v','e','c','4',' ','d','e','f','a','u','l','t','C','o','l','o','r','B',' ','=',' ','v','e','c','4','(','0','.','3','4',',',' ','0','.','2','6',',',' ','0','.','2','2',',',' ','0','.','0',')',';',' ','/','/',' ','B','r','o','w','n','i','s','h',' ','s','t','o','n','e',13,10,'u','n','i','f','o','r','m',' ','v','e','c','4',' ','d','e','f','a','u','l','t','C','o','l','o','r','A',' ','=',' ','v','e','c','4','(','0','.','5','0',',',' ','0','.','3','8',',',' ','0','.','3','0',',',' ','0','.','0',')',';',' ','/','/',' ','D','i','r','t','y',' ','s','a','n','d',13,10,13,10,'/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/',' ','R','O','C','K',' ','G','R','I','T',' ','B','O','N','E',' ','S','A','N','D',13,10,'/','/','u','n','i','f','o','r','m',' ','v','e','c','4',' ',' ','f','r','e','s','m','a','p',' ','=',' ','v','e','c','4','(','1','.','0',',',' ','1','.','0',',',' ','0','.','2',',',' ','0','.','5',')',';',13,10,'/','/','u','n','i','f','o','r','m',' ','v','e','c','4',' ',' ','f','r','e','s','p','o','w',' ','=',' ','v','e','c','4','(','5','.','0',',',' ','5','.','0',',',' ','2','.','0',',',' ','1','.','0',')',';',13,10,'u','n','i','f','o','r','m',' ','v','e','c','4',' ',' ','s','p','e','c','m','a','p',' ','=',' ','v','e','c','4','(','1','.','0',',',' ','1','.','0',',',' ','1','.','0',',',' ','1','.','0',')',';',13,10,'u','n','i','f','o','r','m',' ','v','e','c','4',' ',' ','s','p','e','c','p','o','w',' ','=',' ','v','e','c','4','(','2','0',',',' ',' ','2','0',',',' ',' ','2','0',',',' ',' ','2','0',' ',')',';',13,10,13,10,'u','n','i','f','o','r','m',' ','v','e','c','2',' ','v','i','e','w','p','o','r','t',';',13,10,'u','n','i','f','o','r','m',' ','m','a','t','4',' ','I','n','v','e','r','s','e','R','o','t','a','t','i','o','n','P','r','o','j','e','c','t','i','o','n',';',13,10,'u','n','i','f','o','r','m',' ','v','e','c','4',' ','L','i','g','h','t','0','_','p','o','s','i','t','i','o','n',';',13,10,'u','n','i','f','o','r','m',' ','f','l','o','a','t',' ','v','i','s','i','b','i','l','e','D','i','s','t','a','n','c','e',' ','=',' ','1','0','0',';',13,10,'/','/','u','n','i','f','o','r','m',' ','f','l','o','a','t',' ','A','b','s','o','l','u','t','e','T','i','m','e',';',13,10,13,10,'u','n','i','f','o','r','m',' ','m','a','t','3',' ','N','o','r','m','a','l','M','a','t','r','i','x',';',' ','/','/','/','/',' ','T','E','M','P',' ','/','/','/','/',13,10,'u','n','i','f','o','r','m',' ','f','l','o','a','t',' ','s','c','a','l','e',';',' ','/','/',' ','T','E','M','P',13,10,9,13,10,'/','/',' ','I','N','P','U','T',':',13,10,'i','n',' ','V','e','r','t','e','x','D','a','t','a',' ','{',13,10,9,'v','e','c','4',' ','p','o','s','i','t','i','o','n',';',' ','/','/',' ','P','o','s','i','t','i','o','n',' ','i','n',' ','m','o','d','e','l',' ','s','p','a','c','e',13,10,' ',' ',' ',' ','v','e','c','4',' ','g','r','a','d','i','e','n','t',';',' ','/','/',' ','G','r','a','d','i','e','n','t','s',' ','(','T','0',' ','a','n','d',' ','T','1',')',13,10,9,'v','e','c','4',' ','c','o','l','o','r',';',13,10,9,'v','e','c','4',' ','m','i','x','m','a','p',';',13,10,9,'v','e','c','3',' ','N','0',';',' ',' ',' ',' ',' ',' ',' ','/','/',' ','T','E','M','P',13,10,9,'v','e','c','3',' ','E',';',' ',' ',' ',' ',' ',' ',' ',' ','/','/',' ','P','o','s','i','t','i','o','n',' ','i','n',' ','w','o','r','l','d',' ','s','p','a','c','e',13,10,9,'v','e','c','3',' ','L',';',' ',' ',' ',' ',' ',' ',' ',' ','/','/',' ','L','i','g','h','t',' ','i','n',' ','w','o','r','l','d',' ','s','p','a','c','e',13,10,9,'v','e','c','3',' ','b','a','r','y','c','e','n','t','r','i','c',';',13,10,'}',' ','g','V','e','r','t','e','x',';',13,10,' ',13,10,'/','/',' ','O','U','T','P','U','T',':',13,10,'o','u','t',' ','v','e','c','4',' ','f','r','a','g','C','o','l','o','r',';',13,10,13,10,13,10,'/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/',13,10,'/','/',' ','C','o','m','m','o','n',' ','f','u','n','c','t','i','o','n','s',13,10,'/','/',13,10,'v','e','c','3',' ','g','e','t','T','r','i','p','l','a','n','a','r','W','e','i','g','h','t','V','e','c','t','o','r','(','v','e','c','3',' ','N',')',' ','{',13,10,' ',' ',' ',' ','v','e','c','3',' ','w',' ','=',' ','p','o','w','(','a','b','s','(','N',')',',',' ','v','e','c','3','(','6','4','.','0',')',')',';',' ',13,10,' ',' ',' ',' ','/','/',' ','w',' ','=',' ','m','a','x','(','w',',',' ','0','.','0','0','0','0','0','0','0','0','0','0','0','0','0','0','1',')',';',' ',13,10,' ',' ',' ',' ','r','e','t','u','r','n',' ','w',' ','/',' ','d','o','t','(','w',',',' ','v','e','c','3','(','1','.','0',')',')',';',13,10,'}',13,10,13,10,'v','e','c','4',' ','t','e','x','t','u','r','e','T','r','i','p','l','a','n','a','r','(','s','a','m','p','l','e','r','2','D',' ','d','e','t','a','i','l','s','T','U',',',' ','v','e','c','3',' ','p','o','s','i','t','i','o','n',',',' ','v','e','c','3',' ','w','e','i','g','h','t',',',' ','f','l','o','a','t',' ','l','o','d','B','i','a','s',')',13,10,'{',13,10,' ',' ',' ',' ','r','e','t','u','r','n',' ','w','e','i','g','h','t','.','x','*','t','e','x','t','u','r','e','(','d','e','t','a','i','l','s','T','U',',',' ','p','o','s','i','t','i','o','n','.','z','y',',',' ','l','o','d','B','i','a','s',')',' ',13,10,' ',' ',' ',' ',' ',' ',' ',' ',' ','+',' ','w','e','i','g','h','t','.','y','*','t','e','x','t','u','r','e','(','d','e','t','a','i','l','s','T','U',',',' ','p','o','s','i','t','i','o','n','.','z','x',',',' ','l','o','d','B','i','a','s',')',' ',13,10,' ',' ',' ',' ',' ',' ',' ',' ',' ','+',' ','w','e','i','g','h','t','.','z','*','t','e','x','t','u','r','e','(','d','e','t','a','i','l','s','T','U',',',' ','p','o','s','i','t','i','o','n','.','x','y',',',' ','l','o','d','B','i','a','s',')',';',13,10,'}',13,10,13,10,'/','/',' ','h','t','t','p','s',':','/','/','w','w','w','.','s','h','a','d','e','r','t','o','y','.','c','o','m','/','v','i','e','w','/','M','s','3','y','z','S',13,10,'v','e','c','4',' ','b','l','e','n','d','M','i','x','m','a','p','(','v','e','c','4',' ','m','i','x','m','a','p',')',' ',13,10,'{',13,10,' ',' ',' ',' ','c','o','n','s','t',' ','f','l','o','a','t',' ','M','i','x','m','a','p','B','l','e','n','d','i','n','g',' ','=',' ','0','.','5',';',' ','/','/',' ','0','.','0',' ','s','h','a','r','p',',',' ','0','.','5',' ','s','m','o','o','t','h',',',' ','1','.','0',' ','s','m','o','o','t','h','e','r',13,10,' ',' ',' ',' ','f','l','o','a','t',' ','m','a','x','i','m','a',' ','=',' ','m','a','x','(','m','a','x','(','m','i','x','m','a','p','.','x',',',' ','m','i','x','m','a','p','.','y',')',',',' ','m','a','x','(','m','i','x','m','a','p','.','z',',',' ','m','i','x','m','a','p','.','w',')',')',';',13,10,' ',' ',' ',' ','m','i','x','m','a','p',' ','=',' ','m','a','x','(','m','i','x','m','a','p',' ','-',' ','m','a','x','i','m','a',' ','+',' ','M','i','x','m','a','p','B','l','e','n','d','i','n','g',',',' ','v','e','c','4','(','0','.','0',')',')',';',13,10,' ',' ',' ',' ','m','i','x','m','a','p',' ','/','=',' ','d','o','t','(','m','i','x','m','a','p',',',' ','v','e','c','4','(','1','.','0',')',')',';',13,10,' ',' ',' ',' ','r','e','t','u','r','n',' ','m','i','x','m','a','p',';',13,10,'}',13,10,13,10,'v','e','c','4',' ','b','l','e','n','d','C','o','l','o','r','(','v','e','c','4',' ','c','o','l','o','r',',',' ','v','e','c','4',' ','m','i','x','m','a','p',',',' ','f','l','o','a','t',' ','x','1',',',' ','f','l','o','a','t',' ','x','2',')',13,10,'{',13,10,' ',' ',' ',' ','c','o','l','o','r',' ','=',' ','m','i','x','(','c','o','l','o','r',',',' ','d','e','f','a','u','l','t','C','o','l','o','r','R',',',' ','s','m','o','o','t','h','s','t','e','p','(','x','1',',',' ','x','2',',',' ','m','i','x','m','a','p','.','r',')',')',13,10,' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','+',' ','m','i','x','(','c','o','l','o','r',',',' ','d','e','f','a','u','l','t','C','o','l','o','r','G',',',' ','s','m','o','o','t','h','s','t','e','p','(','x','1',',',' ','x','2',',',' ','m','i','x','m','a','p','.','g',')',')',13,10,' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','+',' ','m','i','x','(','c','o','l','o','r',',',' ','d','e','f','a','u','l','t','C','o','l','o','r','B',',',' ','s','m','o','o','t','h','s','t','e','p','(','x','1',',',' ','x','2',',',' ','m','i','x','m','a','p','.','b',')',')',13,10,' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','+',' ','m','i','x','(','c','o','l','o','r',',',' ','d','e','f','a','u','l','t','C','o','l','o','r','A',',',' ','s','m','o','o','t','h','s','t','e','p','(','x','1',',',' ','x','2',',',' ','m','i','x','m','a','p','.','a',')',')',';',13,10,' ',' ',' ',' ','r','e','t','u','r','n',' ','c','o','l','o','r','/','4','.','0',';',13,10,'}',13,10,13,10,'/','/',' ','h','t','t','p',':','/','/','w','e','b','e','r','.','i','t','n','.','l','i','u','.','s','e','/','~','s','t','e','g','u','/','T','N','M','0','8','4','-','2','0','1','7','/','b','u','m','p','m','a','p','p','i','n','g','/','b','u','m','p','m','a','p','p','i','n','g','.','p','d','f',13,10,'/','/',' ','A','l','s','o',' ','c','h','e','c','k',' ','d','o','B','u','m','p','M','a','p','(',')',' ','i','n',' ','D','e','s','e','r','t',' ','C','a','n','y','o','n',' ','(','h','t','t','p','s',':','/','/','w','w','w','.','s','h','a','d','e','r','t','o','y','.','c','o','m','/','v','i','e','w','/','X','s','3','3','D','f',')',13,10,'v','o','i','d',' ','d','i','s','p','l','a','c','e','V','e','r','t','e','x','A','n','d','R','e','c','o','m','p','u','t','e','N','o','r','m','a','l','(','i','n','o','u','t',' ','v','e','c','3',' ','p',',',' ','i','n','o','u','t',' ','v','e','c','3',' ','N',',',' ','f','l','o','a','t',' ','H',',',' ','v','e','c','3',' ','d','H',')',13,10,'{',13,10,' ',' ',' ',' ','p',' ','=',' ','p',' ','+',' ','H','*','N',';',13,10,' ',' ',' ',' ','N',' ','=',' ','n','o','r','m','a','l','i','z','e','(',' ','(','1','.','0',' ','+',' ','d','o','t','(','d','H',',','N',')',')','*','N',' ','-',' ','d','H',' ',')',';',13,10,'}',13,10,'/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/','/',13,10,9,13,10,'/','/',' ','T','O','D','O',' ','T','h','e',' ','w','h','o','l','e',' ','e','n','v','i','r','o','n','m','e','n','t',' ','s','p','h','e','r','e',' ','t','e','x','t','u','r','e',' ','s','h','o','u','l','d',' ','b','e',' ','p','r','e','c','o','m','p','u','t','e','d',' ','w','h','e','n',' ','t','i','m','e',' ','(','a','n','d',' ','l','o','c','a','t','i','o','n','?',')',' ','c','h','a','n','g','e','s',' ','s','i','g','n','i','f','i','c','a','n','t','l','y','.',13,10,'v','e','c','3',' ','g','e','t','S','k','y','D','o','m','e','C','o','l','o','r','(','v','e','c','3',' ','E',',',' ','v','e','c','3',' ','L',',',' ','v','e','c','3',' ','s','u','n','C','o','l','o','r',',',' ','v','e','c','3',' ','z','e','n','i','t','h','C','o','l','o','r',',',' ','v','e','c','3',' ','h','o','r','i','z','o','n','C','o','l','o','r',',',' ','v','e','c','3',' ','g','r','o','u','n','d','C','o','l','o','r',')',13,10,'{',13,10,' ',' ',' ',' ','v','e','c','3',' ','c','o','l','o','r',' ',' ','=',' ','m','i','x','(','z','e','n','i','t','h','C','o','l','o','r',',',' ','h','o','r','i','z','o','n','C','o','l','o','r',',',' ','p','o','w','(','1','.','0','-','E','.','z',',',' ','4','.','0',')',')',';',13,10,9,9,13,10,9,'/','/',' ','s','u','n',' ','a','n','d',' ','h','a','l','o',13,10,9,'f','l','o','a','t',' ','s','u','n','H','a','l','o','W','i','d','t','h',' ','=',' ','m','i','x','(','2',',',' ','3','0',',',' ','s','m','o','o','t','h','s','t','e','p','(','0','.','0',',',' ','0','.','5',',',' ','L','.','z',')',')',';',13,10,9,'f','l','o','a','t',' ','s','u','n','D','i','s','c','W','i','d','t','h',' ','=',' ','5','0','0','0',';',' ',13,10,9,'f','l','o','a','t',' ','E','d','o','t','L',' ','=',' ','m','a','x','(','d','o','t','(','E',',','L',')',',','0','.','0',')',';',13,10,9,'c','o','l','o','r',' ','=',' ','m','i','x','(','c','o','l','o','r',',',' ','s','u','n','C','o','l','o','r',',',' ','p','o','w','(','E','d','o','t','L',',','s','u','n','H','a','l','o','W','i','d','t','h',')',')',';',9,9,13,10,9,'c','o','l','o','r',' ','+','=',' ','p','o','w','(','E','d','o','t','L',',',' ','s','u','n','D','i','s','c','W','i','d','t','h',')',';',' ','/','/',9,9,9,9,9,9,9,9,9,9,9,13,10,9,13,10,9,'/','/',' ','c','l','o','u','d','s',13,10,9,'/','/','c','o','l','o','r',' ','+','=',' ','0','.','0','3','*','v','a','l','u','e','1','(','(','E','.','x','y','+','0','.','1',')','/','(','E','.','z','+','0','.','1',')','*','2','.','0',')',';',13,10,9,13,10,9,'/','/',' ','h','o','r','i','z','o','n',13,10,' ',' ',' ',' ','c','o','l','o','r',' ','=',' ','m','i','x','(','c','o','l','o','r',',',' ','g','r','o','u','n','d','C','o','l','o','r',',',' ','s','m','o','o','t','h','s','t','e','p','(','-','0','.','1',',',' ','0','.','0',',',' ','-','E','.','z',')',')',';',13,10,13,10,9,'/','/',' ','N','O','T','E',' ','n','o',' ','p','o','s','t','p','r','o','c','e','s','s','i','n','g',13,10,9,'r','e','t','u','r','n',' ','c','o','l','o','r',';',13,10,'}',13,10,13,10,'v','e','c','3',' ','t','o','n','e','(','v','e','c','3',' ','c','o','l','o','r',',',' ','f','l','o','a','t',' ','t',')',' ',13,10,'{',13,10,' ',' ',' ',' ','r','e','t','u','r','n',' ','s','m','o','o','t','h','s','t','e','p','(','0','.','0',',',' ','1','.','0',',',' ','c','o','l','o','r','/','(','c','o','l','o','r',' ','+',' ','t',')','*','(','1','.','0',' ','+',' ','t',')',')',';',13,10,' ',' ',' ',' ','/','/','r','e','t','u','r','n',' ','c','o','l','o','r','/','(','c','o','l','o','r',' ','+',' ','t',')','*','(','1','.','0',' ','+',' ','t',')',';',13,10,'}',13,10,9,13,10,13,10,'v','o','i','d',' ','m','a','i','n','(',')',13,10,'{',9,13,10,9,'/','/',13,10,9,'/','/',' ','T','e','x','t','u','r','e',' ','g','e','n','e','r','a','t','i','o','n',13,10,9,'/','/',13,10,9,'/','/',' ','N','O','T','E',':',' ','H','e','r','e',' ','h','e','i','g','h','t',',',' ','l','u','m','a',',',' ','o','c','c','l','u','s','i','o','n',' ','a','r','e',' ','a','s','s','i','m','i','l','a','t','e','d',' ','t','o',' ','t','h','e',' ','s','a','m','e',' ','p','h','y','s','i','c','a','l',' ','e','n','t','i','t','y','.',13,10,9,'f','l','o','a','t',' ','v','e','r','t','e','x','L','u','m','a',' ','=',' ','0','.','2',';',13,10,9,'f','l','o','a','t',' ','l','u','m','a',' ',' ',' ',' ',' ',' ','=',' ','v','e','r','t','e','x','L','u','m','a',';',13,10,9,'v','e','c','3',' ','n','o','r','m','a','l',' ',' ',' ',' ',' ','=',' ','n','o','r','m','a','l','i','z','e','(','v','e','c','3','(','g','V','e','r','t','e','x','.','g','r','a','d','i','e','n','t','.','x','y',',',' ','1',')',')',';',13,10,9,'v','e','c','4',' ','c','o','l','o','r',' ',' ',' ',' ',' ',' ','=',' ','g','V','e','r','t','e','x','.','c','o','l','o','r',';',' ',13,10,9,'v','e','c','4',' ','m','i','x','m','a','p',' ',' ',' ',' ',' ','=',' ','g','V','e','r','t','e','x','.','m','i','x','m','a','p',';',13,10,13,10,' ',' ',' ',' ','f','l','o','a','t',' ','d','i','s','t',' ',' ',' ',' ',' ',' ','=',' ','l','e','n','g','t','h','(','g','V','e','r','t','e','x','.','E',')',';',13,10,9,'f','l','o','a','t',' ','t','e','x','t','u','r','e','F','a','d','i','n','g','F','a','c','t','o','r',' ','=',' ','c','l','a','m','p','(','d','i','s','t','/','v','i','s','i','b','i','l','e','D','i','s','t','a','n','c','e',',',' ','0','.','0',',',' ','1','.','0',')',';',13,10,9,13,10,9,'i','f','(',' ','t','e','x','t','u','r','e','F','a','d','i','n','g','F','a','c','t','o','r',' ','<','=',' ','1','.','0',' ',')',13,10,9,'{',13,10,' ',' ',' ',' ',' ',' ',' ',' ','c','o','n','s','t',' ','f','l','o','a','t',' ','L','o','d','B','i','a','s',' ','=',' ','-','0','.','6','6','6',';',' ','/','/',' ','0','.','0',' ','s','m','o','o','t','h',',',' ','-','0','.','5',' ','s','h','a','r','p','e','r',13,10,' ',' ',' ',' ',' ',' ',' ',' ','v','e','c','3',' ','w',' ','=',' ','g','e','t','T','r','i','p','l','a','n','a','r','W','e','i','g','h','t','V','e','c','t','o','r','(',' ','n','o','r','m','a','l','i','z','e','(','v','e','c','3','(','g','V','e','r','t','e','x','.','g','r','a','d','i','e','n','t','.','x','y','/','s','c','a','l','e',',',' ','1',')',')',' ',')',';',13,10,' ',' ',' ',' ',' ',' ',' ',' ','v','e','c','4',' ','l','u','m','a','4',' ','=',' ','t','e','x','t','u','r','e','T','r','i','p','l','a','n','a','r','(','d','e','t','a','i','l','s','T','U',',',' ','g','V','e','r','t','e','x','.','p','o','s','i','t','i','o','n','.','x','y','z',',',' ','w',',',' ','L','o','d','B','i','a','s',')',';',' ',13,10,' ',' ',' ',' ',' ',' ',' ',' ','/','/',' ','T','O','D','O',':',' ','d','e','-','o','f','f','s','t',' ','f','o','r',' ','m','i','x','m','a','p','>','1',',',' ','m','e','a','n','i','n','g',':',' ','o','f','f','s','e','t',' ','[','1','.','.','2',']','=','>','[','1','.','.','0',']',' ','a','n','d',' ','a','m','p','l','i','t','u','d','e',' ','1','=','>','0','.',13,10,' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',13,10,' ',' ',' ',' ',' ',' ',' ',' ','m','i','x','m','a','p',' ','=',' ','b','l','e','n','d','M','i','x','m','a','p','(','m','i','x','m','a','p',' ','+',' ','l','u','m','a','4',')',';',' ','/','/',' ','m','o','v','e','a','b','l','e',' ','t','o',' ','t','e','s','s','e','l','l','a','t','o','r',' ','?',13,10,' ',' ',' ',' ',' ',' ',' ',' ','c','o','l','o','r',' ',' ','=',' ','b','l','e','n','d','C','o','l','o','r','(','g','V','e','r','t','e','x','.','c','o','l','o','r',',',' ','m','i','x','m','a','p',',',' ','0','.','3',',',' ','0','.','6',')',';',' ','/','/',' ','m','o','v','e','a','b','l','e',' ','t','o',' ','t','e','s','s','e','l','l','a','t','o','r',' ','?',13,10,9,9,13,10,9,9,'/','/',' ','G','r','a','c','i','o','u','s','l','y',' ','f','a','d','e',' ','t','e','x','t','u','r','e',' ','m','a','p','p','i','n','g',' ','o','u','t',' ','w','i','t','h',' ','d','i','s','t','a','n','c','e','.',13,10,9,9,'l','u','m','a',' ','=',' ','m','i','x','(',' ','d','o','t','(','m','i','x','m','a','p',',',' ','l','u','m','a','4',')',',',' ','v','e','r','t','e','x','L','u','m','a',',',' ','t','e','x','t','u','r','e','F','a','d','i','n','g','F','a','c','t','o','r',')',';',13,10,9,9,'c','o','l','o','r',' ','=',' ','m','i','x','(','c','o','l','o','r',',',' ','g','V','e','r','t','e','x','.','c','o','l','o','r',',',' ','t','e','x','t','u','r','e','F','a','d','i','n','g','F','a','c','t','o','r',')',';',13,10,13,10,9,9,'i','f','(',' ','B','u','m','p','s',' ','>',' ','0','.','0',' ',')',' ',13,10,9,9,'{',' ',' ',' ',' ',13,10,9,9,' ',' ',' ','v','e','c','4',' ','l','u','m','a','4','D','x',' ','=',' ','t','e','x','t','u','r','e','T','r','i','p','l','a','n','a','r','(','d','e','t','a','i','l','s','D','x','T','U',',',' ','g','V','e','r','t','e','x','.','p','o','s','i','t','i','o','n','.','x','y','z',',',' ','w',',',' ','L','o','d','B','i','a','s',')',';',13,10,9,9,' ',' ',' ','v','e','c','4',' ','l','u','m','a','4','D','y',' ','=',' ','t','e','x','t','u','r','e','T','r','i','p','l','a','n','a','r','(','d','e','t','a','i','l','s','D','y','T','U',',',' ','g','V','e','r','t','e','x','.','p','o','s','i','t','i','o','n','.','x','y','z',',',' ','w',',',' ','L','o','d','B','i','a','s',')',';',13,10,13,10,' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','/','/',' ','C','o','m','p','u','t','e',' ','H',' ','a','n','d',' ','d','H',13,10,' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','/','/',' ','N','O','T','E',':',' ','H','e','i','g','h','t',' ','d','i','s','p','l','a','c','e','m','e','n','t',' ','i','s',' ','d','i','s','a','b','l','e','d',' ','h','e','r','e',13,10,' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','f','l','o','a','t',' ','H',' ','=',' ','0','.','0',';',' ','/','/',' ','H','e','i','g','h','t',' ','a','l','t','e','r','a','t','i','o','n',' ','d','o','e','s','n',39,'t',' ','m','a','t','t','e','r',' ','i','n',' ','b','u','m','p',' ','m','a','p','p','i','n','g','.',13,10,9,9,9,'v','e','c','3',' ','d','H',' ','=',' ','v','e','c','3','(',13,10,9,9,9,' ',' ',' ',' ','d','o','t','(','m','i','x','m','a','p',',',' ','l','u','m','a','4','D','x',')',',',13,10,9,9,9,' ',' ',' ',' ','d','o','t','(','m','i','x','m','a','p',',',' ','l','u','m','a','4','D','y',')',',',13,10,9,9,9,' ',' ',' ',' ','0','.','0',' ','/','/',' ','D','z',' ','d','o','e','s','n',39,'t',' ','m','a','t','t','e','r',' ','b','e','c','a','u','s','e',' ','i','t',39,'s',' ','t','e','x','t','u','r','e',' ','m','a','p','p','i','n','g',',',' ','n','o',' ','r','e','l','i','e','f',' ','h','e','r','e','.',13,10,9,9,9,')',';',13,10,9,9,9,13,10,9,9,9,'/','/',' ','E','n','e','r','g','y',' ','a','d','u','j','u','s','t','m','e','n','t',' ','a','c','r','o','s','s',' ','L','O','D','s',' ','(','e','m','p','i','r','i','c',')','.',13,10,9,9,9,'f','l','o','a','t',' ','s','c','a','l','e','0','0',' ','=',' ','1',' ','+',' ','0','.','7','0','*','l','o','g','(','s','c','a','l','e',')',';',' ',13,10,9,9,9,13,10,9,9,9,'/','/',' ','G','r','a','c','i','o','u','s','l','y',' ','f','a','d','e',' ','b','u','m','p','s',' ','o','u','t',' ','w','i','t','h',' ','d','i','s','t','a','n','c','e','.',13,10,9,9,' ',' ',' ',' ','f','l','o','a','t',' ','_','b','u','m','p','_','i','n','t','e','n','s','i','t','y',' ','=',' ','m','i','x','(','b','u','m','p','_','i','n','t','e','n','s','i','t','y',',',' ','0','.','0',',',' ','t','e','x','t','u','r','e','F','a','d','i','n','g','F','a','c','t','o','r',')',';',13,10,9,9,9,13,10,9,9,9,'/','/','H',' ',' ','*','=',' ','_','b','u','m','p','_','i','n','t','e','n','s','i','t','y',' ','*',' ','s','c','a','l','e','0','0',';',' ',13,10,9,9,9,'d','H',' ','*','=',' ','_','b','u','m','p','_','i','n','t','e','n','s','i','t','y',' ','*',' ','s','c','a','l','e','0','0',';',13,10,9,9,9,13,10,9,9,9,'v','e','c','3',' ','P',' ','=',' ','g','V','e','r','t','e','x','.','p','o','s','i','t','i','o','n','.','x','y','z',';',13,10,' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','d','i','s','p','l','a','c','e','V','e','r','t','e','x','A','n','d','R','e','c','o','m','p','u','t','e','N','o','r','m','a','l','(','P',',',' ','n','o','r','m','a','l',',',' ','H',',',' ','d','H',')',';',13,10,9,9,'}',13,10,9,'}',13,10,9,13,10,9,'/','/',13,10,9,'/','/',' ','G','l','o','b','a','l',' ','I','l','l','u','m','i','n','a','t','i','o','n',13,10,9,'/','/',13,10,9,13,10,9,'/','/',' ','M','o','d','e','l',' ','s','p','a','c','e',13,10,' ',' ',' ',' ','v','e','c','2',' ','n','d','c','o','o','r','d','s',' ','=',' ','g','l','_','F','r','a','g','C','o','o','r','d','.','x','y','/','v','i','e','w','p','o','r','t','*','2','.','0',' ','-',' ','1','.','0',';',13,10,9,'v','e','c','3',' ','E','E',' ','=',' ','n','o','r','m','a','l','i','z','e','(','(','I','n','v','e','r','s','e','R','o','t','a','t','i','o','n','P','r','o','j','e','c','t','i','o','n',' ','*',' ','v','e','c','4','(','n','d','c','o','o','r','d','s',',','0',',','1',')',')','.','x','y','z',')',';',13,10,9,'v','e','c','3',' ','L','L',' ','=',' ','n','o','r','m','a','l','i','z','e','(','L','i','g','h','t','0','_','p','o','s','i','t','i','o','n','.','x','y','z',')',';',13,10,9,'v','e','c','3',' ','L','I',' ','=',' ','n','o','r','m','a','l','i','z','e','(','v','e','c','3','(','-','L','L','.','x',',',' ','-','L','L','.','y',',',' ','0','.','0',')',')',';',13,10,9,'v','e','c','3',' ','N','N',' ','=',' ','n','o','r','m','a','l','i','z','e','(','v','e','c','3','(','n','o','r','m','a','l','.','x','y','/','s','c','a','l','e',',',' ','n','o','r','m','a','l','.','z',')',')',';',13,10,9,'v','e','c','3',' ','R','R',' ','=',' ','r','e','f','l','e','c','t','(','L','L',',','N','N',')',';',13,10,9,13,10,9,'/','/',' ','a','t','m','o','s','p','h','e','r','i','c',' ','s','c','a','t','t','e','r','i','n','g',13,10,9,'v','e','c','3',' ','s','u','n','C','o','l','o','r',9,' ',' ','=',' ','m','i','x','(','v','e','c','3','(','0','.','8','0',',',' ','0','.','2','4',',',' ','0','.','2','0',')',',',' ','v','e','c','3','(','1','.','0','0',',',' ','0','.','9','0',',',' ','0','.','7','4',')',',',' ','s','m','o','o','t','h','s','t','e','p','(',' ','0','.','0',',',' ','0','.','4',',',' ','L','L','.','z',')',')',';',13,10,9,'v','e','c','3',' ','z','e','n','i','t','h','C','o','l','o','r',' ',' ','=',' ','m','i','x','(','v','e','c','3','(','0','.','0','1',',',' ','0','.','0','2',',',' ','0','.','0','4',')',',',' ','v','e','c','3','(','0','.','3','5',',',' ','0','.','4','8',',',' ','0','.','6','0',')',',',' ','s','m','o','o','t','h','s','t','e','p','(','-','0','.','8',',',' ','0','.','0',',',' ','L','L','.','z',')',')',';',13,10,9,'v','e','c','3',' ','h','o','r','i','z','o','n','C','o','l','o','r',' ','=',' ','m','i','x','(','v','e','c','3','(','0','.','0','2',',',' ','0','.','0','3',',',' ','0','.','0','4',')',',',' ','s','u','n','C','o','l','o','r',',',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','s','m','o','o','t','h','s','t','e','p','(','-','0','.','4',',',' ','0','.','5',',',' ','L','L','.','z',')',')',';',13,10,9,'v','e','c','3',' ','g','r','o','u','n','d','C','o','l','o','r',' ',' ','=',' ','m','i','x','(','0','.','1','*','z','e','n','i','t','h','C','o','l','o','r',',',' ','1','.','4','*','z','e','n','i','t','h','C','o','l','o','r',',',' ','s','m','o','o','t','h','s','t','e','p','(','0','.','0',',',' ','0','.','4',',',' ','L','L','.','z',')',')',';',13,10,9,'v','e','c','3',' ','s','k','y','C','o','l','o','r','B','y','E','E',' ','=',' ','g','e','t','S','k','y','D','o','m','e','C','o','l','o','r','(','E','E',',',' ','L','L',',',' ','s','u','n','C','o','l','o','r',',',' ','z','e','n','i','t','h','C','o','l','o','r',',',' ','h','o','r','i','z','o','n','C','o','l','o','r',',',' ','g','r','o','u','n','d','C','o','l','o','r',')',';',13,10,9,13,10,9,'/','/',13,10,9,'/','/',' ','L','i','g','h','t','i','n','g',13,10,9,'/','/',13,10,9,'v','e','c','3',' ','c','o','l',';',13,10,9,'v','e','c','3',' ','l','i','g','h','t',';',13,10,' ',' ',' ',' ',13,10,' ',' ',' ',' ','v','e','c','3',' ','E',' ','=',' ','n','o','r','m','a','l','i','z','e','(','g','V','e','r','t','e','x','.','E',')',';',' ',13,10,9,'v','e','c','3',' ','L',' ','=',' ','n','o','r','m','a','l','i','z','e','(','g','V','e','r','t','e','x','.','L',')',';',13,10,' ',' ',' ',' ','v','e','c','3',' ','N',' ','=',' ','n','o','r','m','a','l','i','z','e','(','N','o','r','m','a','l','M','a','t','r','i','x',' ','*',' ','n','o','r','m','a','l',')',';',13,10,9,'v','e','c','3',' ','R',' ','=',' ','r','e','f','l','e','c','t','(','L',',','N',')',';',13,10,9,13,10,9,'f','l','o','a','t',' ','s','h','a','d','o','w','i','n','g',' ','=',' ','c','l','a','m','p','(','2','0','.','0','*','d','o','t','(','n','o','r','m','a','l','i','z','e','(','g','V','e','r','t','e','x','.','N','0',')',',','L',')',',',' ','1','.','0',' ','-',' ','S','h','a','d','o','w','s',',',' ','1','.','0',')',';',13,10,9,'f','l','o','a','t',' ','a','m','b','i','e','n','c','e',' ',' ','=',' ','s','m','o','o','t','h','s','t','e','p','(','-','0','.','5',',',' ','0','.','5',',',' ','L','L','.','z',')',';',13,10,' ',' ',' ',' ','f','l','o','a','t',' ','o','c','c','l','u','s','i','o','n',' ','=',' ','p','o','w','(','l','u','m','a',',',' ','1','.','0',')',';',13,10,9,'f','l','o','a','t',' ','g','l','o','s','s','m','a','p',' ',' ','=',' ','s','m','o','o','t','h','s','t','e','p','(','0','.','2',',',' ','0','.','7',',',' ','l','u','m','a',')',';',' ','/','/',' ','T','O','D','O',' ','a','d','d',' ','s','u','b',' ','g','l','o','s','s','m','a','p',' ','f','o','r',' ','s','a','n','d',13,10,9,'f','l','o','a','t',' ','f','r','e','s','n','m','a','p',' ',' ','=',' ','s','m','o','o','t','h','s','t','e','p','(','0','.','2',',',' ','0','.','7',',',' ','l','u','m','a',')',';',13,10,9,13,10,9,'f','l','o','a','t',' ','d','i','f','f','u','s','e',' ',' ',' ','=',' ','s','h','a','d','o','w','i','n','g',' ','*',' ','o','c','c','l','u','s','i','o','n',' ','*',' ','m','a','x','(','0','.','0',',',' ','d','o','t','(','N',',','L',')',')',';','/','/','s','m','o','o','t','h','s','t','e','p','(','0','.','0',',',' ','1','.','4',',',' ','l','o','g','(','1','+','1','.','0','*','m','a','x','(','0','.','0',',',' ','d','o','t','(','N',',','L',')',')',')',')',';',' ','/','/',' ','W','h','a','t',' ','B','R','D','F',' ','i','s',' ','t','h','i','s','?',13,10,9,'f','l','o','a','t',' ','i','n','d','i','r','e','c','t',' ',' ','=',' ','a','m','b','i','e','n','c','e',' ',' ','*',' ','o','c','c','l','u','s','i','o','n',' ','*',' ','m','a','x','(','0','.','0',',',' ','d','o','t','(','N','N',',','L','I',')',')',';',' ',13,10,9,'f','l','o','a','t',' ','s','k','y',' ',' ',' ',' ',' ',' ',' ','=',' ','1','.','0',' ',' ',' ',' ',' ',' ',' ','*',' ','o','c','c','l','u','s','i','o','n',' ','*',' ','c','l','a','m','p','(','0','.','5',' ','+',' ','0','.','5','*','N','.','z',',',' ','0','.','0',',',' ','1','.','0',')',';',13,10,9,'f','l','o','a','t',' ','s','p','e','c','u','l','a','r',' ',' ','=',' ','s','h','a','d','o','w','i','n','g',' ','*',' ','g','l','o','s','s','m','a','p',' ',' ','*',' ','d','o','t','(','m','i','x','m','a','p',',',' ','s','p','e','c','m','a','p',')',' ','*',' ','p','o','w','(','m','a','x','(','0','.','0',',',' ','d','o','t','(','E',',','R',')',')',',',' ','d','o','t','(','m','i','x','m','a','p',',',' ','s','p','e','c','p','o','w',')',')',';',13,10,9,'f','l','o','a','t',' ','f','r','e','s','n','e','l',' ',' ',' ','=',' ','1','.','0',' ',' ',' ',' ',' ',' ',' ','*',' ','f','r','e','s','n','m','a','p',' ',' ','*',' ','m','i','x','(',' ','1','.','0',',',' ','p','o','w','(','1','.','0','-','a','b','s','(','d','o','t','(','E',',','N',')',')',',',' ','4','.','0',')',',',' ','0','.','9',' ',')',';',13,10,13,10,' ',' ',' ',' ','/','/',' ','E','n','e','r','g','y',' ','c','o','n','s','e','r','v','a','t','i','o','n',' ','(','?',')',13,10,' ',' ',' ',' ','/','/','f','l','o','a','t',' ','r','e','f','l','e','c','t','i','v','i','t','y',' ','=',' ','0','.','4','0',';',' ','/','/',' ','r','e','f','l','e','c','t','i','v','i','t','y',13,10,' ',' ',' ',' ','l','i','g','h','t',' ',' ','=',' ','0','.','6','0',' ','*',' ','D','i','f','f','u','s','e',' ',' ','*',' ','d','i','f','f','u','s','e',' ',' ','*',' ','s','u','n','C','o','l','o','r',';',13,10,' ',' ',' ',' ','l','i','g','h','t',' ','+','=',' ','0','.','4','0',' ','*',' ','S','p','e','c','u','l','a','r',' ','*',' ','s','p','e','c','u','l','a','r',' ','*',' ','s','u','n','C','o','l','o','r',';',' ','/','/','g','e','t','S','k','y','D','o','m','e','C','o','l','o','r','(','R','R',',',' ','L','L',',',' ','s','u','n','C','o','l','o','r',',',' ','z','e','n','i','t','h','C','o','l','o','r',',',' ','h','o','r','i','z','o','n','C','o','l','o','r',',',' ','g','r','o','u','n','d','C','o','l','o','r',')',';',13,10,' ',' ',' ',' ','/','/',' ','A','m','b','i','e','n','t',13,10,' ',' ',' ',' ','l','i','g','h','t',' ','+','=',' ','0','.','0','4',' ','*',' ','I','n','d','i','r','e','c','t',' ','*',' ','i','n','d','i','r','e','c','t',' ','*',' ','s','u','n','C','o','l','o','r',';',13,10,' ',' ',' ',' ','l','i','g','h','t',' ','+','=',' ','0','.','0','8',' ','*',' ','S','k','y',9,' ',' ',' ',' ',' ','*',' ','s','k','y',' ',' ',' ',' ',' ',' ','*',' ','z','e','n','i','t','h','C','o','l','o','r',';',13,10,' ',' ',' ',' ','l','i','g','h','t',' ','=',' ','m','i','x','(','l','i','g','h','t',',',' ','g','e','t','S','k','y','D','o','m','e','C','o','l','o','r','(','r','e','f','l','e','c','t','(','E','E',',','N','N',')',',',' ','L','L',',',' ','s','u','n','C','o','l','o','r',',',' ','z','e','n','i','t','h','C','o','l','o','r',',',' ','h','o','r','i','z','o','n','C','o','l','o','r',',',' ','g','r','o','u','n','d','C','o','l','o','r',')',',',' ','0','.','1','0',' ','*',' ','F','r','e','s','n','e','l',' ','*',' ','f','r','e','s','n','e','l',')',';',13,10,' ',' ',' ',' ','/','/',' ','T','o','n','e',' ','m','a','p','p','i','n','g',13,10,9,'c','o','l',' ','=',' ','l','i','g','h','t',' ','*',' ','m','i','x','(','c','o','l','o','r','.','r','g','b',',',' ','s','u','n','C','o','l','o','r','*','v','e','c','3','(','1','.','2',',','1','.','1',',','1','.','0',')',',',' ','0','.','7','0','*','D','e','s','a','t','u','r','a','t','e','*','s','m','o','o','t','h','s','t','e','p','(','0','.','1',',',' ','0','.','4',',',' ','L','L','.','z',')','*','t','o','n','e','(','v','e','c','3','(','d','i','f','f','u','s','e',' ','+',' ','s','p','e','c','u','l','a','r',')',',',' ','0','.','0','2',')',')',';',13,10,' ',' ',' ',' ','c','o','l',' ',' ','=',' ','t','o','n','e','(','c','o','l',',',' ','0','.','2',')',';',' ',13,10,13,10,' ',' ',' ',' ','/','/',13,10,9,'/','/',' ','S','c','a','t','t','e','r','i','n','g',' ','(','h','a','l','o',' ','a','n','d',' ','f','o','g',')',13,10,9,'/','/',13,10,9,'i','f','(',' ','S','c','a','t','t','e','r','i','n','g',' ','>',' ','0',' ',')',' ','{',13,10,9,' ',' ',' ',' ','f','l','o','a','t',' ','E','d','o','t','L',' ','=',' ','m','a','x','(','0','.','0',',',' ','d','o','t','(','E',',','L',')',')',';',13,10,9,' ',' ',' ',' ','f','l','o','a','t',' ','d','a','y','T','i','m','e',' ','=',' ','s','m','o','o','t','h','s','t','e','p','(','-','0','.','1',',',' ','0','.','5',',',' ','L','L','.','z',')',';',13,10,9,' ',' ',' ',' ','f','l','o','a','t',' ','s','c','a','t','t','e','r','i','n','g',' ','=',' ','d','a','y','T','i','m','e','*','(','1','.','0','-','e','x','p','(','-','0','.','0','0','3','0','*','d','i','s','t',')',')','*','p','o','w','(','E','d','o','t','L',',',' ','8','.','0',')',';',' ','/','/',' ','T','O','D','O',':',' ','a','n','d',' ','v','i','s','i','b','i','l','e','D','i','s','t','a','n','c','e','?',13,10,9,9,'c','o','l',' ','+','=',' ','8','.','0',' ','*',' ','s','c','a','t','t','e','r','i','n','g',' ','*',' ','z','e','n','i','t','h','C','o','l','o','r',';',13,10,9,9,'c','o','l',' ','=',' ','m','i','x','(','c','o','l',',',' ','g','r','o','u','n','d','C','o','l','o','r',',',' ','s','m','o','o','t','h','s','t','e','p','(','v','i','s','i','b','i','l','e','D','i','s','t','a','n','c','e','*','0','.','2',',',' ','v','i','s','i','b','i','l','e','D','i','s','t','a','n','c','e',',',' ','d','i','s','t',')',')',';',13,10,9,'}',13,10,13,10,9,'/','/',13,10,9,'/','/',' ','P','o','s','t','p','r','o','c','e','s','s','i','n','g',13,10,9,'/','/',13,10,9,13,10,9,'f','l','o','a','t',' ','g','a','m','m','a',' ','=',' ','G','a','m','m','a',' ','>',' ','0','.','0',' ','?',' ','2','*','2','.','2',' ',':',' ','3','.','7',';',13,10,9,'c','o','l',' ','=',' ','p','o','w','(','c','o','l',',',' ','v','e','c','3','(','1','.','0','/','g','a','m','m','a',')',')',';',9,13,10,' ',' ',' ',' ','c','o','l',' ','=',' ','m','i','x','(','c','o','l',',',' ','c','o','l','*','c','o','l','*','(','3','.','0','-','2','.','0','*','c','o','l',')',',',' ','0','.','3',' ','*',' ','C','o','n','t','r','a','s','t',')',';',13,10,9,'c','o','l',' ','=',' ','m','i','x','(','c','o','l',',',' ','v','e','c','3','(','d','o','t','(','c','o','l',',','v','e','c','3','(','0','.','3','3',')',')',')',',',' ','0','.','4',' ','*',' ','U','n','s','a','t','u','r','a','t','e',')',';',13,10,9,'c','o','l',' ','*','=',' ','m','i','x','(','v','e','c','3','(','1','.','0',')',',',' ','v','e','c','3','(','1','.','0','6',',',' ','1','.','0','5',',',' ','1','.','0','0',')',',',' ','1','.','0',' ','*',' ','T','i','n','t',')',';',9,13,10,9,13,10,9,'c','o','l',' ','*','=',' ','m','i','x','(','1','.','0',',',' ','p','o','w','(','2','.','0','*','(','n','d','c','o','o','r','d','s','.','x','*','n','d','c','o','o','r','d','s','.','x','-','1','.','0',')','*','(','n','d','c','o','o','r','d','s','.','y','*','n','d','c','o','o','r','d','s','.','y','-','1',')',',',' ','0','.','2','0',')',',',' ','0','.','5',' ','*',' ','V','i','g','n','e','t','t','i','n','g',')',';',9,13,10,9,'c','o','l',' ','+','=',' ','0','.','0','0','0','0','0','0','0','0','0','0','1',' ','*',' ','G','a','m','m','a',' ','*',' ','C','o','n','t','r','a','s','t',' ','*',' ','U','n','s','a','t','u','r','a','t','e',' ','*',' ','T','i','n','t',' ','*',' ','V','i','g','n','e','t','t','i','n','g','*','D','e','s','a','t','u','r','a','t','e',';',' ','/','/',' ','T','E','M','P',13,10,13,10,9,'/','/',' ','b','a','n','d','i','n','g',' ','r','e','m','o','v','a','l',13,10,9,'/','/','c','o','l','.','x','y','z',' ','+','=',' ','h','a','s','h','1','b','(',' ','n','d','c','o','o','r','d','s',' ','+',' ','f','r','a','c','t','(','A','b','s','o','l','u','t','e','T','i','m','e','*','0','.','0','0','0','1',')',' ',')','/','2','5','5','.','0',';',13,10,9,'/','/','c','o','l','.','x','y','z',' ','+','=',' ','1','0','*','h','a','s','h','1','2','(',' ','n','d','c','o','o','r','d','s','*','1','2','3',' ','+',' ','f','r','a','c','t','(','A','b','s','o','l','u','t','e','T','i','m','e','*','0','.','0','1',')',' ',')','/','2','5','5','.','0',';',13,10,9,13,10,9,13,10,9,'/','/',13,10,9,'/','/',' ','D','e','b','u','g',' ','c','o','n','t','r','o','l','s',13,10,9,'/','/',13,10,' ',' ',' ',9,'i','f','(',' ','D','e','b','u','g','M','o','d','e',' ','=','=',' ','C','o','l','o','r','V','i','e','w',' ',')',' ','{',13,10,9,' ',' ',' ',' ','c','o','l',' ','=',' ','4','.','0',' ','*',' ','c','o','l','o','r','.','r','g','b',' ','*',' ','o','c','c','l','u','s','i','o','n',';',13,10,9,'}',' ','e','l','s','e',' ','i','f','(',' ','D','e','b','u','g','M','o','d','e',' ','=','=',' ','L','i','g','h','t','V','i','e','w',' ',')',' ','{',13,10,9,9,'c','o','l',' ','=',' ','3','.','0',' ','*',' ','l','i','g','h','t',';',' ','/','/',' ','N','O','T','E',':',' ','F','r','e','s','n','e','l',' ','i','s',' ','n','o','t',' ','i','n','c','l','u','d','e','d','.',13,10,9,'}',' ','e','l','s','e',' ','i','f','(',' ','D','e','b','u','g','M','o','d','e',' ','=','=',' ','N','o','r','m','a','l','V','i','e','w',' ',')',' ','{',13,10,9,9,'c','o','l',' ','=',' ','n','o','r','m','a','l','i','z','e','(','v','e','c','3','(','n','o','r','m','a','l','.','x','y','/','s','c','a','l','e',',',' ','n','o','r','m','a','l','.','z',')',')',';',13,10,9,'}',' ','e','l','s','e',' ','i','f','(',' ','D','e','b','u','g','M','o','d','e',' ','=','=',' ','F','r','e','s','n','e','l','V','i','e','w',' ',')',' ','{',13,10,9,9,'c','o','l','.','x','y','z',' ','=',' ','m','i','x','(','c','o','l','.','x','y','z',',',' ','v','e','c','3','(','0','.','0',',','1','.','0',',','1','.','0',')',',',' ','f','r','e','s','n','e','l',')',';',13,10,9,'}',' ',13,10,9,13,10,9,'i','f','(',' ','W','i','r','e','f','r','a','m','e',' ','>',' ','0',' ',')',' ','{',13,10,9,' ',' ',' ',' ','/','/',' ','W','i','r','e','f','r','a','m','e',13,10,9,9,'v','e','c','3',' ','d',' ','=',' ','f','w','i','d','t','h','(','g','V','e','r','t','e','x','.','b','a','r','y','c','e','n','t','r','i','c',')',';',13,10,9,9,'v','e','c','3',' ','t',' ','=',' ','s','m','o','o','t','h','s','t','e','p','(','v','e','c','3','(','0','.','0',')',',',' ','d','*','1','.','5',',',' ','g','V','e','r','t','e','x','.','b','a','r','y','c','e','n','t','r','i','c',')',';',13,10,9,9,'f','l','o','a','t',' ','e','d','g','e','F','a','c','t','o','r',' ','=',' ','m','i','n','(','m','i','n','(','t','.','x',',',' ','t','.','y',')',',',' ','t','.','z',')',';',13,10,9,9,'c','o','l',' ','=',' ','m','i','x','(','p','o','w','(','c','o','l','.','x','y','z',',','v','e','c','3','(','0','.','8',')',')',',',' ','p','o','w','(','c','o','l','.','x','y','z',',','v','e','c','3','(','1','.','2',')',')',',',' ','e','d','g','e','F','a','c','t','o','r',')',';',9,' ',' ',' ',' ',13,10,9,' ',' ',' ',' ','/','/',' ','T','i','l','e','F','r','a','m','e',' ',' ',' ',13,10,9,' ',' ',' ',' ','v','e','c','2',' ','p',' ','=',' ','f','r','a','c','t','(','g','V','e','r','t','e','x','.','p','o','s','i','t','i','o','n','.','x','y','/','s','c','a','l','e',')',';',13,10,9,' ',' ',' ',' ','f','l','o','a','t',' ','m',' ','=',' ','m','i','n','(','m','i','n','(','p','.','x',',',' ','p','.','y',')',',',' ','m','i','n','(','1','.','0','-','p','.','x',',',' ','1','.','0','-','p','.','y',')',')',';',13,10,9,' ',' ',' ',' ','c','o','l','.','r',' ','+','=',' ','0','.','1','*','(','1','.','0','-','s','m','o','o','t','h','s','t','e','p','(','0','.','0',',',' ','0','.','0','5',',',' ','m',')',')',';',' ',13,10,9,'}',13,10,9,13,10,9,'i','f','(',' ','g','l','_','F','r','a','g','C','o','o','r','d','.','x',' ','<',' ','7','0','0','.','0',' ',')',' ','{',13,10,9,' ',' ',' ',' ','/','/','c','o','l',' ','=',' ','v','e','c','3','(','1',',','0',',','0',')',';',13,10,9,'}',13,10,13,10,9,'f','r','a','g','C','o','l','o','r',' ','=',' ','v','e','c','4','(',' ','c','o','l','.','r','g','b',',',' ','1',' ',')',';',13,10,'}',13,10,0 };